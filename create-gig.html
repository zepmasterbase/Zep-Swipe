<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Zep Swipe — Create Job</title>

<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@600;700&family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">

<style>
:root{
  --zep-blue:#00f0ff;
  --zep-violet:#9c4dff;
  --bg:radial-gradient(circle at 30% 10%, #050018, #00000c);
  --glass:rgba(255,255,255,0.08);
  --text-light:rgba(255,255,255,0.85);
}

*{box-sizing:border-box;margin:0;padding:0;font-family:Poppins,sans-serif}

body{
  background:var(--bg);
  color:#fff;
  min-height:100vh;
}

/* HEADER */
header{
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:18px;
  margin:16px;
  border-radius:16px;
  background:radial-gradient(circle at center, rgba(0,240,255,.2), rgba(156,77,255,.2));
  backdrop-filter:blur(14px);
}

.brand{
  font-family:Orbitron;
  font-size:1.4rem;
  background:linear-gradient(90deg,var(--zep-blue),var(--zep-violet));
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
}

.back-btn{
  background:rgba(255,255,255,.1);
  border:none;
  padding:8px 16px;
  border-radius:999px;
  color:#fff;
  cursor:pointer;
}

/* CONTAINER */
.container{
  max-width:520px;
  margin:30px auto;
  background:var(--glass);
  border-radius:18px;
  padding:22px;
  border:1px solid rgba(255,255,255,.12);
  box-shadow:0 0 40px rgba(156,77,255,.25);
}

/* PAYMENT CARD */
.payment-card{
  padding:18px;
  border-radius:14px;
  background:rgba(255,255,255,.05);
  margin-bottom:20px;
  border:1px solid rgba(255,255,255,.12);
}

.payment-card h3{
  font-family:Orbitron;
  margin-bottom:6px;
}

.payment-card p{
  font-size:.85rem;
  color:var(--text-light);
}

.pay-btn{
  margin-top:14px;
  width:100%;
  padding:12px;
  border:none;
  border-radius:999px;
  background:linear-gradient(90deg,var(--zep-blue),var(--zep-violet));
  color:#050015;
  font-family:Orbitron;
  cursor:pointer;
}

/* FORM */
form{
  display:flex;
  flex-direction:column;
  gap:14px;
}

input, textarea, select{
  width:100%;
  padding:12px;
  border-radius:12px;
  border:none;
  outline:none;
}

textarea{resize:none}

.submit-btn{
  margin-top:8px;
  padding:14px;
  border:none;
  border-radius:999px;
  background:linear-gradient(90deg,var(--zep-blue),var(--zep-violet));
  color:#050015;
  font-family:Orbitron;
  cursor:pointer;
}

.locked{
  opacity:.4;
  pointer-events:none;
}

.notice{
  font-size:.8rem;
  color:var(--text-light);
  text-align:center;
}
</style>
</head>
<body>

<script>
/* AUTH CHECK */
const employer = JSON.parse(localStorage.getItem("employerUser"));
if(!employer){
  window.location.href = "employer-auth.html";
}
</script>

<header>
  <div class="brand">Zep Swipe</div>
  <button class="back-btn" onclick="location.href='swipe-merchants.html'">← Back</button>
</header>

<div class="container">

  <!-- PAYMENT VERIFICATION -->
  <div class="payment-card" id="paymentCard">
    <h3>Employer Verification</h3>
    <p>$25 one-time yearly payment to list unlimited jobs.</p>
    <button class="pay-btn" onclick="verifyPayment()">Verify & Pay $25</button>
  </div>

  <!-- JOB FORM -->
  <form id="jobForm" class="locked">
    <h3 style="font-family:Orbitron">Create Job</h3>

    <input type="text" id="title" placeholder="Job Title" required>
    
    <textarea id="description" rows="4" placeholder="Job Description" required></textarea>

    <select id="level">
      <option value="Beginner">Beginner (Students)</option>
      <option value="Verified">Verified Freelancer</option>
    </select>

    <input type="number" id="rate" placeholder="Hourly Rate ($)" required>

    <button type="submit" class="submit-btn">Publish Job</button>
  </form>

  <p class="notice">Verification renews automatically every year.</p>
</div>

<script>
const verification = JSON.parse(localStorage.getItem("employerVerification"));
const jobForm = document.getElementById("jobForm");
const paymentCard = document.getElementById("paymentCard");

/* CHECK VERIFICATION */
if(verification && verification.expiresAt > Date.now()){
  unlockForm();
}

/* SIMULATED FLUTTERWAVE PAYMENT */
function verifyPayment(){
  const expiresAt = Date.now() + (365 * 24 * 60 * 60 * 1000);

  localStorage.setItem("employerVerification", JSON.stringify({
    paid:true,
    expiresAt
  }));

  alert("Payment successful! Verification valid for 1 year.");
  unlockForm();
}

function unlockForm(){
  paymentCard.style.display = "none";
  jobForm.classList.remove("locked");
}

/* CREATE JOB */
jobForm.addEventListener("submit", e=>{
  e.preventDefault();

  const jobs = JSON.parse(localStorage.getItem("jobs")) || [];

  jobs.push({
    id: Date.now(),
    title: title.value,
    description: description.value,
    level: level.value,
    rate: rate.value,
    employer: employer.email,
    postedAt: new Date().toISOString()
  });

  localStorage.setItem("jobs", JSON.stringify(jobs));
  alert("Job published successfully!");
  location.href = "swipe-merchants.html";
});
</script>

</body>
</html>