<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Create Gig — Zep Swipe</title>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@600;700&family=Poppins:wght@300;400,500,600&display=swap" rel="stylesheet">
<style>
:root{
  --zep-blue:#00f0ff;
  --zep-violet:#9c4dff;
  --bg:radial-gradient(circle at 30% 10%, #050018, #00000c);
  --glass:rgba(255,255,255,0.08);
  --text-light:rgba(255,255,255,0.85);
}
*{box-sizing:border-box;margin:0;padding:0;font-family:Poppins,sans-serif}
body{background:var(--bg);color:#fff;min-height:100vh;padding:0 16px;}
header{display:flex;align-items:center;justify-content:space-between;padding:16px;margin:16px;border-radius:16px;background:radial-gradient(circle at center, rgba(0,240,255,.2), rgba(156,77,255,.2));backdrop-filter:blur(14px);}
.brand{font-family:Orbitron;font-size:1.5rem;background:linear-gradient(90deg,var(--zep-blue),var(--zep-violet));-webkit-background-clip:text;-webkit-text-fill-color:transparent;}
.logout-btn{background:rgba(255,255,255,.1);border:none;border-radius:50%;width:38px;height:38px;cursor:pointer;color:#fff;font-size:16px;}
.logout-btn:hover{background:rgba(255,0,80,.25);}
.form-container{max-width:500px;margin:20px auto;background:var(--glass);border-radius:16px;padding:20px;border:1px solid rgba(255,255,255,.12);box-shadow:0 0 36px rgba(156,77,255,.2);}
.form-container h2{text-align:center;font-family:Orbitron;margin-bottom:16px;}
.form-container input, .form-container select, .form-container textarea{width:100%;padding:12px;margin-bottom:12px;border-radius:12px;border:none;outline:none;background:rgba(255,255,255,.05);color:#fff;}
.form-container textarea{resize:none;height:100px;}
.form-container button{width:100%;padding:12px;border:none;border-radius:999px;background:linear-gradient(90deg,var(--zep-blue),var(--zep-violet));color:#050015;font-family:Orbitron;font-weight:600;cursor:pointer;transition:.3s;}
.form-container button:hover{transform:translateY(-2px);box-shadow:0 0 36px rgba(156,77,255,.45);}
.payment-section{background:rgba(255,255,255,.05);padding:12px;border-radius:12px;margin-bottom:12px;border:1px solid rgba(255,255,255,.12);}
.payment-section button{width:100%;margin-top:8px;}
.success-message{color:limegreen;font-weight:600;text-align:center;margin-bottom:12px;}
</style>
</head>
<body>

<header>
  <div class="brand">Zep Swipe</div>
  <button class="logout-btn" onclick="logout()">⎋</button>
</header>

<div class="form-container">
  <h2>Create Job / Gig</h2>
  
  <input type="text" id="jobTitle" placeholder="Job Title (e.g., Graphic Design Flyer)">
  <textarea id="jobDesc" placeholder="Job Description"></textarea>
  
  <select id="jobCategory">
    <option value="">Select Category</option>
    <option value="Beginner">Beginner Job</option>
    <option value="Verified">Verified Freelancer Job</option>
  </select>
  
  <input type="number" id="jobPrice" placeholder="Price per Hour (USD)">
  
  <!-- Payment Verification -->
  <div class="payment-section" id="paymentSection">
    <strong>Pay $10 to verify listing (non-refundable)</strong>
    <button id="payButton">Pay & Verify</button>
    <span id="paymentStatus"></span>
  </div>

  <!-- List Job -->
  <button id="listJob" disabled>List Job</button>
</div>

<script>
/* SESSION PROTECTION */
const user = JSON.parse(localStorage.getItem("currentUser"));
if(!user){
  window.location.href="auth.html";
}

// Logout
function logout(){
  localStorage.removeItem("currentUser");
  window.location.href="auth.html";
}

/* Payment Simulation */
const payButton = document.getElementById("payButton");
const paymentStatus = document.getElementById("paymentStatus");
let paymentVerified = false;

payButton.addEventListener("click", ()=>{
  // Simulate Flutterwave Payment here
  // In production: integrate Flutterwave inline payment
  paymentVerified = true;
  paymentStatus.innerHTML = "✅ Payment Verified!";
  document.getElementById("listJob").disabled = false;
});

/* List Job */
const listJobBtn = document.getElementById("listJob");
listJobBtn.addEventListener("click", ()=>{
  const title = document.getElementById("jobTitle").value.trim();
  const desc = document.getElementById("jobDesc").value.trim();
  const category = document.getElementById("jobCategory").value;
  const price = parseFloat(document.getElementById("jobPrice").value);

  if(!title || !desc || !category || !price){
    alert("Fill all fields before listing job.");
    return;
  }
  if(!paymentVerified){
    alert("Please verify payment first.");
    return;
  }

  // Save job in localStorage
  let jobs = JSON.parse(localStorage.getItem("jobs")) || [];
  const job = {
    id: Date.now(),
    title,
    desc,
    category,
    price,
    employer: user.name,
    verified: category==="Verified"
  };
  jobs.push(job);
  localStorage.setItem("jobs", JSON.stringify(jobs));
  alert("Job listed successfully!");
  // Reset form
  document.getElementById("jobTitle").value="";
  document.getElementById("jobDesc").value="";
  document.getElementById("jobCategory").value="";
  document.getElementById("jobPrice").value="";
  paymentVerified=false;
  paymentStatus.innerHTML="";
  document.getElementById("listJob").disabled=true;
});
</script>

</body>
</html>