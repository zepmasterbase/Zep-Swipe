<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Zep Swipe â€” Campus Deals</title>
<style>
:root{
  --zep-blue:#00f0ff;
  --zep-violet:#9c4dff;
  --bg:radial-gradient(circle at 25% 10%, #050018 0%, #00000c 100%);
  --glass:rgba(255,255,255,0.08);
  --text-light: rgba(255,255,255,0.85);
}

/* Base Styles */
body{
  margin:0;
  font-family:Poppins,sans-serif;
  background: var(--bg);
  color:#fff;
  min-height:100vh;
  padding:16px;
}

/* HEADER */
header{
  display:flex;
  justify-content: space-between;
  align-items:center;
  padding:16px 24px;
  border-radius:16px;
  backdrop-filter: blur(16px);
  background: radial-gradient(circle at center, rgba(0,240,255,0.2), rgba(156,77,255,0.2));
  margin-bottom:32px;
  animation: pulseHeader 4s infinite alternate;
}
@keyframes pulseHeader{
  0%{box-shadow:0 0 20px rgba(0,240,255,0.25);}
  50%{box-shadow:0 0 50px rgba(156,77,255,0.4);}
  100%{box-shadow:0 0 20px rgba(0,240,255,0.25);}
}
header .list-deals{
  font-family:Orbitron,sans-serif;
  padding: 8px 16px;
  border-radius:999px;
  background: linear-gradient(90deg,var(--zep-blue),var(--zep-violet));
  color:#050015;
  transition:0.3s;
  text-decoration:none;
}
header .list-deals:hover{
  transform:translateY(-2px); 
  box-shadow:0 0 36px rgba(156,77,255,.45);
}
header .logo{
  font-family:Orbitron,sans-serif;
  font-size:1.8rem;
  background: linear-gradient(90deg,var(--zep-blue),var(--zep-violet));
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
}

/* SEARCH BAR */
.search-container{
  margin-bottom:32px;
  text-align:center;
}
.search-container input{
  width:80%;
  max-width:400px;
  padding:12px 16px;
  border-radius:999px;
  border:none;
  outline:none;
  font-size:1rem;
  background:var(--glass);
  color:#fff;
  text-align:center;
}

/* DEALS GRID SECTION */
.deals-section{
  margin-bottom:60px;
}
.deals-section h2{
  font-family:Orbitron,sans-serif;
  font-size:1.6rem;
  margin-bottom:24px;
  text-align:left;
  background:linear-gradient(90deg,var(--zep-blue),var(--zep-violet));
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
}

/* GRID */
.deals-grid{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(260px,1fr));
  gap:24px;
}

/* DEAL CARD */
.deal-card{
  background: var(--glass);
  border-radius:16px;
  padding:20px;
  text-align:center;
  border:1px solid rgba(255,255,255,0.12);
  box-shadow:0 8px 20px rgba(0,240,255,0.2);
  transition:transform 0.3s, box-shadow 0.3s;
  perspective:1000px;
  cursor:pointer;
  animation: pulseCard 4s infinite alternate;
}
@keyframes pulseCard{
  0%{box-shadow:0 8px 20px rgba(0,240,255,0.15);}
  50%{box-shadow:0 12px 28px rgba(156,77,255,0.25);}
  100%{box-shadow:0 8px 20px rgba(0,240,255,0.15);}
}
.deal-card:hover{
  transform: rotateY(5deg) rotateX(3deg) scale(1.03);
  box-shadow:0 16px 40px rgba(156,77,255,0.35);
}

/* 3D Neon Icon */
.deal-icon{
  width:100px;
  height:100px;
  margin-bottom:12px;
}

/* Text info */
.deal-name{
  font-family:Orbitron,sans-serif;
  font-size:1.2rem;
  margin-bottom:6px;
  background:linear-gradient(90deg,var(--zep-blue),var(--zep-violet));
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
}
.deal-desc,.deal-distance{
  font-size:0.9rem;
  color:var(--text-light);
  margin-bottom:6px;
}

.view-btn{
  display:inline-block;
  margin-top:10px;
  padding:10px 20px;
  border-radius:999px;
  font-family:Orbitron,sans-serif;
  font-weight:600;
  font-size:14px;
  background: linear-gradient(90deg,var(--zep-blue),var(--zep-violet));
  color:#050015;
  box-shadow:0 0 16px rgba(0,240,255,.35);
  transition:0.25s;
  text-decoration:none;
}
.view-btn:hover{
  transform:translateY(-2px);
  box-shadow:0 0 36px rgba(156,77,255,.45);
}

@media(max-width:600px){
  header{flex-direction:column; gap:12px;}
  .deals-grid{grid-template-columns:1fr;}
  .search-container input{width:100%;}
}
</style>
</head>
<body>

<header>
  <a href="business.html" class="list-deals">List Deals</a>
  <div class="logo">Zep Swipe</div>
</header>

<div class="search-container">
  <input type="text" id="searchInput" placeholder="Search for a store...">
</div>

<section class="deals-section">
  <h2>Nearby Student Stores</h2>
  <div class="deals-grid" id="dealsGrid1"></div>
</section>

<section class="deals-section">
  <h2>Trending Student Favorites</h2>
  <div class="deals-grid" id="dealsGrid2"></div>
</section>

<script>
// ----------------------------
// Sample stores with neon 3D SVG icons
// ----------------------------
const stores1 = [
  {name:"Campus Cafe",desc:"20% off coffee & pastries",lat:-33.9571,lng:18.4603,logo:"https://upload.wikimedia.org/wikipedia/commons/6/6b/Placeholder_light_blue.svg"},
  {name:"BookHub Store",desc:"10% off textbooks & free notebook",lat:-29.8587,lng:31.0218,logo:"https://upload.wikimedia.org/wikipedia/commons/6/6b/Placeholder_light_blue.svg"},
];
const stores2 = [
  {name:"Tech Gear",desc:"15% off student gadgets",lat:-26.2041,lng:28.0473,logo:"https://upload.wikimedia.org/wikipedia/commons/6/6b/Placeholder_light_blue.svg"},
  {name:"Student Fashion",desc:"Buy 1 Get 1 Free T-shirts",lat:-25.7479,lng:28.2293,logo:"https://upload.wikimedia.org/wikipedia/commons/6/6b/Placeholder_light_blue.svg"},
];

// ----------------------------
// Calculate distance
// ----------------------------
function getDistance(lat1, lon1, lat2, lon2){
  const R = 6371;
  const dLat = (lat2-lat1)*Math.PI/180;
  const dLon = (lon2-lon1)*Math.PI/180;
  const a = Math.sin(dLat/2)**2 + Math.cos(lat1*Math.PI/180)*Math.cos(lat2*Math.PI/180)*Math.sin(dLon/2)**2;
  const c = 2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a));
  return (R*c).toFixed(2)+" km";
}

// ----------------------------
// Render grid
// ----------------------------
function renderGrid(gridId,stores,userLat,userLon){
  const container = document.getElementById(gridId);
  container.innerHTML="";
  stores.forEach(store=>{
    // Filter by distance < 50km for example
    const distance = userLat && userLon ? getDistance(userLat,userLon,store.lat,store.lng) : null;
    if(distance){
      const card = document.createElement("div");
      card.className="deal-card";
      card.innerHTML=`
        <img src="${store.logo}" class="deal-icon" alt="${store.name}">
        <div class="deal-name">${store.name}</div>
        <div class="deal-desc">${store.desc}</div>
        <div class="deal-distance">Distance: ${distance}</div>
        <a href="store.html" class="view-btn" onclick='viewStore(${JSON.stringify(store)})'>View Store Details</a>
      `;
      container.appendChild(card);
    }
  });
}

// ----------------------------
// Save store in localStorage
// ----------------------------
function viewStore(store){
  localStorage.setItem("currentStore",JSON.stringify(store));
}

// ----------------------------
// Geolocation and filtering
// ----------------------------
function loadStores(position){
  const userLat = position.coords.latitude;
  const userLon = position.coords.longitude;
  renderGrid("dealsGrid1",stores1,userLat,userLon);
  renderGrid("dealsGrid2",stores2,userLat,userLon);
}

function locationError(){
  console.warn("Geolocation unavailable. Showing no stores.");
  document.getElementById("dealsGrid1").innerHTML="<p>No nearby deals available</p>";
  document.getElementById("dealsGrid2").innerHTML="<p>No nearby deals available</p>";
}

if(navigator.geolocation){
  navigator.geolocation.getCurrentPosition(loadStores,locationError);
}else{
  locationError();
}

// ----------------------------
// Search filter
// ----------------------------
const searchInput = document.getElementById("searchInput");
searchInput.addEventListener("input", function(){
  const term = this.value.toLowerCase();
  ["dealsGrid1","dealsGrid2"].forEach(gridId=>{
    document.querySelectorAll(`#${gridId} .deal-card`).forEach(card=>{
      const name = card.querySelector(".deal-name").textContent.toLowerCase();
      card.style.display = name.includes(term) ? "block" : "none";
    });
  });
});
</script>
</body>
</html>