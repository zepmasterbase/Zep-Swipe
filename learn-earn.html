<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Zep Swipe — Learn & Earn</title>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@600,700&family=Poppins:wght@300,400,500,600&display=swap" rel="stylesheet">
<style>
:root{
  --zep-blue:#00f0ff;
  --zep-violet:#9c4dff;
  --bg:radial-gradient(circle at 30% 10%, #050018, #00000c);
  --glass:rgba(255,255,255,.08);
  --text-light:rgba(255,255,255,.85);
  --accent:#00ff9d;
  --streak:#ffea00;
  --card-bg:rgba(255,255,255,.05);
}

/* RESET */
*{box-sizing:border-box;margin:0;padding:0;font-family:Poppins,sans-serif;}
body{background:var(--bg);color:#fff;min-height:100vh;line-height:1.4;overflow-x:hidden;}
a{text-decoration:none;color:inherit;}
button{cursor:pointer;border:none;}

/* HEADER */
header{
  display:flex;justify-content:space-between;align-items:center;
  padding:16px 20px;max-width:1200px;margin:auto;margin-top:10px;
  border-radius:12px;background:rgba(0,0,0,0.15);backdrop-filter:blur(6px);
  position:relative; overflow:hidden;
}
.brand{
  font-family:Orbitron;
  font-size:1.6rem;
  background:linear-gradient(90deg,var(--zep-blue),var(--zep-violet));
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
  position:relative;
  animation: pulseGlow 2s infinite;
}
.home-btn{background:var(--zep-blue);color:#050015;padding:6px 12px;border-radius:12px;font-weight:700;transition:.3s;}
.home-btn:hover{transform:scale(1.05);}
@keyframes pulseGlow{
  0% { text-shadow: 0 0 5px var(--zep-blue),0 0 10px var(--zep-violet); transform: scale(1);}
  50% { text-shadow: 0 0 15px var(--zep-blue),0 0 25px var(--zep-violet); transform: scale(1.05);}
  100% { text-shadow: 0 0 5px var(--zep-blue),0 0 10px var(--zep-violet); transform: scale(1);}
}

/* STUDENT INFO */
.student-info{
  display:flex;justify-content:space-between;align-items:center;
  padding:16px 20px;max-width:1200px;margin:20px auto;
  background:var(--card-bg);border-radius:16px;backdrop-filter:blur(6px);
}
.student-info div{display:flex;flex-direction:column;}
.student-info div span{font-size:0.85rem;color:var(--text-light);}
.wallet-balance{font-weight:700;font-family:Orbitron;}

/* PROGRAM SELECTION */
.programs{display:flex;flex-wrap:wrap;gap:12px;max-width:1200px;margin:0 auto 20px;padding:0 20px;}
.program-card{
  flex:1 1 140px;padding:14px;border-radius:16px;text-align:center;
  background:var(--card-bg);cursor:pointer;transition:.3s;position:relative;
}
.program-card.selected{border:2px solid var(--zep-blue);box-shadow:0 0 15px var(--zep-blue);}
.program-card:hover{transform:translateY(-2px) scale(1.02);}

/* TASK CARDS */
.tasks-container{display:grid;grid-template-columns:1fr;gap:16px;max-width:1200px;margin:auto;padding:0 20px 40px;}
@media(min-width:600px){.tasks-container{grid-template-columns:1fr 1fr;}}
@media(min-width:900px){.tasks-container{grid-template-columns:1fr 1fr 1fr;}}
.task-card{
  background:var(--card-bg);border-radius:16px;padding:16px;
  position:relative;transition:.3s;display:flex;flex-direction:column;gap:8px;
}
.task-card.locked{opacity:0.5;filter:grayscale(70%);}
.task-card h4{margin-bottom:6px;font-size:1rem;}
.task-card p{font-size:0.85rem;color:var(--text-light);}
.task-card input[type="text"]{padding:8px;border-radius:12px;border:none;background:rgba(255,255,255,0.1);color:#fff;outline:none;}
.task-card button{
  padding:8px 16px;border:none;border-radius:999px;background:linear-gradient(90deg,var(--zep-blue),var(--zep-violet));
  color:#050015;font-family:Orbitron;cursor:pointer;transition:.3s;
}
.task-card button:hover{transform:translateY(-2px) scale(1.02);box-shadow:0 0 15px var(--zep-blue),0 0 30px var(--zep-violet);}

/* PROGRESS BAR */
.progress-bar-container{max-width:1200px;margin:20px auto;padding:0 20px;}
.progress-bar{width:100%;height:16px;background:rgba(255,255,255,0.1);border-radius:12px;overflow:hidden;}
.progress-bar-fill{height:100%;width:0%;background:var(--accent);border-radius:12px;transition:width 0.5s ease-in-out;}

/* STREAK BADGES */
.streak-badge{
  display:inline-block;margin-right:6px;padding:4px 8px;border-radius:12px;background:var(--streak);color:#050015;font-weight:600;font-size:0.75rem;transition:.3s;
  transform:scale(1);
}
.streak-badge.earned{animation:pop 0.5s ease forwards;}
@keyframes pop{0%{transform:scale(0.5);}50%{transform:scale(1.2);}100%{transform:scale(1);}}

/* 3D Portfolio Viewer */
#portfolio3D{
  max-width:1200px;margin:20px auto;padding:0 20px;
  height:300px;background:rgba(255,255,255,0.05);border-radius:16px;display:flex;justify-content:center;align-items:center;font-size:1.2rem;color:var(--text-light);
  perspective:1000px;transition:transform 0.5s;
}
#portfolio3D:hover{transform:rotateY(15deg) rotateX(5deg);}

/* VERIFICATION BANNER */
#verificationBanner{
  max-width:1200px;margin:20px auto;padding:16px;border-radius:16px;text-align:center;
  background:linear-gradient(90deg,var(--zep-blue),var(--zep-violet));
  cursor:pointer;font-family:Orbitron;font-weight:700;transition:.3s;display:none;
}
#verificationBanner:hover{transform:translateY(-2px);box-shadow:0 0 20px var(--zep-blue),0 0 40px var(--zep-violet);}

/* FOOTER */
footer{text-align:center;padding:20px 10px;margin-top:40px;border-top:1px solid rgba(255,255,255,.1);color:var(--text-light);font-size:0.85rem;}
</style>
</head>
<body>

<header>
  <div class="brand">Zep Swipe</div>
  <button class="home-btn" onclick="location.href='student-dashboard.html'">Home</button>
</header>

<div class="student-info">
  <div>
    <span id="studentName">Student Name</span>
    <span id="studentCity">City: --</span>
    <span id="studentCountry">Country: --</span>
    <span id="studentUni">University</span>
    <span id="studentProgram">Program: <strong>--</strong></span>
  </div>
  <div class="wallet-balance">Wallet: <span id="walletBalance">0</span> ZAC</div>
  <div><a href="profile.html">Profile</a></div>
</div>

<div class="programs" id="programsContainer"></div>

<div class="progress-bar-container">
  <div class="progress-bar">
    <div class="progress-bar-fill" id="progressFill"></div>
  </div>
</div>

<div id="streakContainer" style="max-width:1200px;margin:10px auto;padding:0 20px;"></div>

<div id="portfolio3D">Student Portfolio Preview</div>

<div class="tasks-container" id="tasksContainer"></div>

<div id="verificationBanner" onclick="location.href='verification.html'">
  Become a Verified Freelancer – $5
</div>

<footer>
  <a href="about.html">About</a> | <a href="marketplace.html">Marketplace</a> | <a href="student-deals.html">Student Deals</a> | <a href="contact.html">Contact</a>
</footer>

<canvas id="confettiCanvas" style="position:fixed;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:1000;"></canvas>

<script>
// =======================
// STUDENT DATA (LOCAL STORAGE OR DEFAULT)
let studentData = JSON.parse(localStorage.getItem('studentData')) || {
  name: "Test Student",
  city: "Test City",
  country: "Test Country",
  university: "Test University",
  program: "Virtual Assistant",
  walletBalance: 0,
  tasksCompleted: [],
  loggedIn: true
};

// INITIAL INFO
document.getElementById('studentName').innerText = studentData.name;
document.getElementById('studentCity').innerText = "City: " + (studentData.city||"--");
document.getElementById('studentCountry').innerText = "Country: " + (studentData.country||"--");
document.getElementById('studentUni').innerText = studentData.university;
document.getElementById('studentProgram').querySelector('strong').innerText = studentData.program || '--';
document.getElementById('walletBalance').innerText = studentData.walletBalance || 0;

// PROGRAM SELECTION
const programs = ["Virtual Assistant","Content Creator (Video)","Blog Writer","Voice-over Artist","Data Entry","UI/UX Designer","Online Tutor"];
const programsContainer = document.getElementById('programsContainer');
programs.forEach(prog=>{
  const card = document.createElement('div');
  card.className='program-card';
  if(studentData.program === prog) card.classList.add('selected');
  card.innerText = prog;
  card.onclick = ()=>{
    studentData.program = prog;
    localStorage.setItem('studentData', JSON.stringify(studentData));
    document.querySelectorAll('.program-card').forEach(c=>c.classList.remove('selected'));
    card.classList.add('selected');
    document.getElementById('studentProgram').querySelector('strong').innerText = prog;
    renderTasks(prog);
  }
  programsContainer.appendChild(card);
});

// TASKS PER PROGRAM (Enhanced with Zora submission)
const taskTemplates = {
  "Virtual Assistant":[
    "Record an intro video of yourself, register profile on www.zora.co and submit your post link here",
    "Organize your email inbox efficiently",
    "Create a daily to-do list",
    "Schedule 3 meetings in Google Calendar",
    "Update Google Sheets database",
    "Research suppliers online",
    "Draft professional emails",
    "Manage social media posts",
    "Prepare weekly reports",
    "Set up Zoom calls",
    "Respond to client queries professionally",
    "Track weekly tasks",
    "Automate recurring tasks",
    "Create a workflow chart",
    "Manage small projects",
    "Review team progress",
    "Optimize calendar scheduling",
    "Organize digital files",
    "Prepare client summaries",
    "Run a full VA workflow",
    "Portfolio showcase: Document all tasks"
  ]
  // Other programs omitted for brevity (you can copy previous tasks and just add Zora intro task)
};

// PROGRESS & STREAK
const tasksContainer = document.getElementById('tasksContainer');
const progressFill = document.getElementById('progressFill');
const streakContainer = document.getElementById('streakContainer');
const confettiCanvas = document.getElementById('confettiCanvas');
const confettiCtx = confettiCanvas.getContext('2d');

function renderTasks(program){
  tasksContainer.innerHTML='';
  streakContainer.innerHTML='';
  if(!studentData.tasksCompleted) studentData.tasksCompleted=[];
  const programTasks = taskTemplates[program] || [];
  for(let day=1; day<=programTasks.length; day++){
    const taskCard = document.createElement('div');
    taskCard.className='task-card';
    const completed = studentData.tasksCompleted.includes(`${program}-${day}`);
    if(day>1 && !studentData.tasksCompleted.includes(`${program}-${day-1}`)) taskCard.classList.add('locked');
    taskCard.innerHTML=`
      <h4>Day ${day}</h4>
      <p>${programTasks[day-1]}</p>
      <input type="text" placeholder="Submit Zora link" ${taskCard.classList.contains('locked')?'disabled':''} id="taskInput${day}">
      <button ${taskCard.classList.contains('locked')?'disabled':''}>Submit (+25 ZAC)</button>
    `;
    tasksContainer.appendChild(taskCard);

    if(completed){
      taskCard.querySelector('button').disabled=true;
      taskCard.querySelector('input').disabled=true;
      addStreakBadge(day);
    }

    if(!taskCard.classList.contains('locked')){
      const btn = taskCard.querySelector('button');
      btn.onclick = ()=>{
        const input = document.getElementById(`taskInput${day}`);
        if(!input.value.trim()){ alert("Please submit a valid Zora link"); return;}
        const taskKey = `${program}-${day}`;
        if(!studentData.tasksCompleted.includes(taskKey)) studentData.tasksCompleted.push(taskKey);
        studentData.walletBalance = (studentData.walletBalance||0)+25;
        document.getElementById('walletBalance').innerText = studentData.walletBalance;
        localStorage.setItem('studentData', JSON.stringify(studentData));
        btn.disabled = true;
        input.disabled = true;
        addStreakBadge(day);
        launchConfetti();
        const nextTask = tasksContainer.children[day];
        if(nextTask){
          nextTask.classList.remove('locked');
          nextTask.querySelector('button').disabled=false;
          nextTask.querySelector('input').disabled=false;
        }
        const completedCount = studentData.tasksCompleted.filter(t=>t.startsWith(program)).length;
        progressFill.style.width=`${(completedCount/programTasks.length)*100}%`;
        if(completedCount===programTasks.length) document.getElementById('verificationBanner').style.display='block';
      }
    }
  }
  const completedCount = studentData.tasksCompleted.filter(t=>t.startsWith(program)).length;
  progressFill.style.width=`${(completedCount/programTasks.length)*100}%`;
}

function addStreakBadge(day){
  const badge = document.createElement('span');
  badge.className='streak-badge earned';
  badge.innerText=`Day ${day} ✅`;
  streakContainer.appendChild(badge);
}

function launchConfetti(){
  confettiCanvas.width=window.innerWidth; confettiCanvas.height=window.innerHeight;
  const confettiCount = 100;
  const confettis=[];
  for(let i=0;i<confettiCount;i++){
    confettis.push({x:Math.random()*confettiCanvas.width,y:Math.random()*confettiCanvas.height-20,r:Math.random()*6+2,dx:(Math.random()-0.5)*2,dy:Math.random()*3+2,color:`hsl(${Math.random()*360},80%,60%)`});
  }
  function draw(){
    confettiCtx.clearRect(0,0,confettiCanvas.width,confettiCanvas.height);
    confettis.forEach(c=>{
      confettiCtx.fillStyle=c.color;
      confettiCtx.beginPath();
      confettiCtx.arc(c.x,c.y,c.r,0,2*Math.PI);
      confettiCtx.fill();
      c.x+=c.dx; c.y+=c.dy;
      if(c.y>confettiCanvas.height){ c.y=0; c.x=Math.random()*confettiCanvas.width; }
    });
    requestAnimationFrame(draw);
  }
  draw();
  setTimeout(()=>{confettiCtx.clearRect(0,0,confettiCanvas.width,confettiCanvas.height);},3000);
}

// INITIAL RENDER
if(studentData.program) renderTasks(studentData.program);

// =======================
// LIVE WALLET UPDATE FOR wallet.html
window.addEventListener('storage', e=>{
  if(e.key==='studentData'){
    studentData = JSON.parse(e.newValue);
    document.getElementById('walletBalance').innerText = studentData.walletBalance;
  }
});
</script>
</body>
</html>