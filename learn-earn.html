<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Zep Swipe â€” Learn & Earn</title>

<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@600;700&family=Poppins:wght@400;500;600&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/ethers@6.6.0/dist/ethers.min.js"></script>

<style>
:root{
  --zep-blue:#00f0ff;
  --zep-violet:#9c4dff;
  --bg:radial-gradient(circle at top, #020014 0%, #00000a 100%);
  --glass:rgba(255,255,255,0.06);
}
*{box-sizing:border-box}
body{
  margin:0;
  font-family:Poppins,sans-serif;
  background:var(--bg);
  color:#fff;
}
.container{
  max-width:960px;
  margin:24px auto 120px;
  padding:16px;
}
.header{
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:16px;
  border-radius:18px;
  background:var(--glass);
  border:1px solid rgba(255,255,255,.12);
  backdrop-filter:blur(18px);
}
.brand{
  font-family:Orbitron;
  font-size:1.4rem;
  background:linear-gradient(90deg,var(--zep-blue),var(--zep-violet));
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
}
.btn{
  font-family:Orbitron;
  font-size:12px;
  padding:8px 16px;
  border-radius:999px;
  border:none;
  cursor:pointer;
  background:linear-gradient(90deg,var(--zep-blue),var(--zep-violet));
  color:#050015;
}
.section-title{
  margin:26px 0 14px;
  font-family:Orbitron;
  font-size:1.15rem;
  background:linear-gradient(90deg,var(--zep-blue),var(--zep-violet));
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
}
.courses{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(240px,1fr));
  gap:14px;
}
.course{
  padding:16px;
  border-radius:18px;
  background:rgba(0,0,0,.7);
  border:1px solid rgba(255,255,255,.12);
  cursor:pointer;
}
.progress{
  height:6px;
  background:rgba(255,255,255,.1);
  border-radius:999px;
  overflow:hidden;
  margin-top:8px;
}
.progress span{
  display:block;
  height:100%;
  background:linear-gradient(90deg,var(--zep-blue),var(--zep-violet));
}
.modal-back{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.75);
  display:none;
  align-items:center;
  justify-content:center;
  z-index:999;
}
.modal{
  width:95%;
  max-width:440px;
  background:rgba(10,15,40,.96);
  padding:18px;
  border-radius:20px;
  border:1px solid rgba(255,255,255,.15);
}
input{
  width:100%;
  margin-top:10px;
  padding:12px;
  border-radius:12px;
  border:1px solid rgba(255,255,255,.2);
  background:#020617;
  color:#fff;
}
.small{font-size:12px;opacity:.8}
.verify-box{
  margin-top:20px;
  padding:18px;
  border-radius:20px;
  background:rgba(0,0,0,.6);
  border:1px solid rgba(0,240,255,.35);
}
.badge{
  display:inline-block;
  padding:6px 12px;
  border-radius:999px;
  background:linear-gradient(90deg,var(--zep-blue),var(--zep-violet));
  color:#050015;
  font-family:Orbitron;
  font-size:11px;
}
</style>
</head>

<body>

<div class="container">

  <div class="header">
    <div class="brand">Zep Swipe Â· Learn & Earn</div>
    <button class="btn" onclick="location.href='dashboard-student.html'">Home</button>
  </div>

  <div class="section-title">Skill Tracks (21 Days Each)</div>
  <div class="courses" id="courseGrid"></div>

  <div class="verify-box" id="verifyBox" style="display:none">
    <h3 class="section-title">Creator Verification</h3>
    <p class="small">
      University: <span id="uni"></span><br>
      Country: <span id="country"></span>
    </p>
    <p class="small">
      Youâ€™ve completed 21 days of real tasks.  
      Pay <strong>$5 USDC</strong> to unlock:
    </p>
    <ul class="small">
      <li>âœ” Verified Creator Badge</li>
      <li>âœ” Swipe Merchants access</li>
      <li>âœ” Public skill identity</li>
    </ul>
    <button class="btn" onclick="payVerification()">Pay $5 USDC & Verify</button>
    <div class="small" id="payStatus"></div>
  </div>

</div>

<!-- MODAL -->
<div class="modal-back" id="modalBack">
  <div class="modal">
    <h3 id="modalTitle"></h3>
    <p id="modalTask" class="small"></p>
    <input id="proof" placeholder="Zora / GitHub / Doc link" />
    <button class="btn" onclick="submitTask()">Submit Task</button>
    <button class="btn" style="margin-top:8px;background:none;color:#fff;border:1px solid rgba(255,255,255,.2)" onclick="closeModal()">Close</button>
  </div>
</div>

<script>
/* CONFIG */
const VERIFY_USDC_TO = "0x833589fcd6edb6e08f4c7c32d4f71b54bda02913";
const USDC = "0x833589fCD6eDb6E08f4c7C32D4f71b54bda02913";
const ERC20_ABI=[
 "function transfer(address,uint256) returns(bool)",
 "function decimals() view returns(uint8)"
];

/* COURSES */
const courses=[
 {id:"prompt",title:"AI Prompt Engineering"},
 {id:"content",title:"AI Content Creation"},
 {id:"design",title:"Social Design"},
 {id:"video",title:"Video Editing"},
 {id:"web",title:"No-Code Websites"},
 {id:"bot",title:"Chatbot Builder"},
 {id:"research",title:"Research & Lead Gen"},
 {id:"auto",title:"Micro-Automation"}
];

let active=null;
const progress=JSON.parse(localStorage.getItem("zepProgress")||"{}");
const student=JSON.parse(localStorage.getItem("zepStudent")||"{}");

/* RENDER */
const grid=document.getElementById("courseGrid");
courses.forEach(c=>{
 const day=progress[c.id]?.day||1;
 const pct=(day-1)/21*100;
 const d=document.createElement("div");
 d.className="course";
 d.innerHTML=`
  <strong>${c.title}</strong>
  <div class="small">Day ${day} / 21</div>
  <div class="progress"><span style="width:${pct}%"></span></div>
 `;
 d.onclick=()=>openCourse(c);
 grid.appendChild(d);
});

/* MODAL */
function openCourse(c){
 active=c;
 const day=progress[c.id]?.day||1;
 document.getElementById("modalTitle").textContent=c.title;
 document.getElementById("modalTask").textContent=`Day ${day} task: Submit real proof (Zora/GitHub/Doc).`;
 document.getElementById("proof").value="";
 document.getElementById("modalBack").style.display="flex";
}
function closeModal(){modalBack.style.display="none";}

/* ANTI-SPAM + SUBMIT */
function submitTask(){
 const link=document.getElementById("proof").value.trim();
 if(!link) return alert("Proof required");

 const today=new Date().toDateString();
 const last=progress[active.id]?.lastDate;
 if(last===today) return alert("Only 1 task per day allowed.");

 const day=progress[active.id]?.day||1;
 progress[active.id]={day:Math.min(day+1,21),lastDate:today,proof:link};
 localStorage.setItem("zepProgress",JSON.stringify(progress));

 student.zacAmount=(student.zacAmount||0)+25;
 localStorage.setItem("zepStudent",JSON.stringify(student));

 alert("+25 ZAC earned");
 closeModal();
 location.reload();
}

/* VERIFY CHECK */
let totalDays=0;
Object.values(progress).forEach(p=>totalDays+=Math.max(0,(p.day||1)-1));
if(totalDays>=21 && !student.verified){
 document.getElementById("verifyBox").style.display="block";
 document.getElementById("uni").textContent=student.university||"â€”";
 document.getElementById("country").textContent=student.country||"â€”";
}

/* PAY VERIFICATION */
async function payVerification(){
 if(!window.ethereum) return alert("Wallet required");
 const provider=new ethers.BrowserProvider(window.ethereum);
 const signer=await provider.getSigner();
 const usdc=new ethers.Contract(USDC,ERC20_ABI,signer);
 const dec=await usdc.decimals();
 const tx=await usdc.transfer(VERIFY_USDC_TO,ethers.parseUnits("5",dec));
 document.getElementById("payStatus").textContent="Confirming transactionâ€¦";
 await tx.wait();
 student.verified=true;
 localStorage.setItem("zepStudent",JSON.stringify(student));
 alert("ðŸŽ‰ Verified! Marketplace unlocked.");
 location.reload();
}
</script>

</body>
</html>