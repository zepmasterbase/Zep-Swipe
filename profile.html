<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Zep Swipe ‚Äî Student Profile</title>

<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@600;700&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet"/>

<style>
:root{
  --zep-blue:#00f0ff;
  --zep-violet:#9c4dff;
  --bg:radial-gradient(circle at 20% 10%, #020014 0%, #000007 100%);
  --glass:rgba(255,255,255,0.06);
}

*{box-sizing:border-box}
body{
  margin:0;
  font-family:'Poppins',sans-serif;
  background:var(--bg);
  color:#fff;
  overflow-x:hidden;
}

header{
  padding:16px;
  background:var(--glass);
  backdrop-filter:blur(14px);
  border-bottom:1px solid rgba(255,255,255,.1);
  display:flex;
  justify-content:space-between;
  align-items:center;
}

.brand{
  font-family:'Orbitron';
  font-size:1.3rem;
  background:linear-gradient(90deg,var(--zep-blue),var(--zep-violet));
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
}

.container{
  max-width:900px;
  margin:20px auto 100px;
  padding:16px;
}

.card{
  background:var(--glass);
  border-radius:18px;
  padding:18px;
  border:1px solid rgba(255,255,255,.12);
  margin-bottom:16px;
}

.profile-top{
  display:flex;
  gap:16px;
  align-items:center;
}

.avatar{
  width:88px;height:88px;
  border-radius:50%;
  background:#020617;
  border:2px solid var(--zep-blue);
  overflow:hidden;
  flex-shrink:0;
}

.avatar img{
  width:100%;
  height:100%;
  object-fit:cover;
}

input[type="file"]{
  margin-top:8px;
}

.name{
  font-family:'Orbitron';
  font-size:1.2rem;
}

.small{
  opacity:.8;
  font-size:.85rem;
}

.progress{
  margin-top:10px;
}

.progress-bar{
  height:8px;
  border-radius:999px;
  background:rgba(255,255,255,.1);
  overflow:hidden;
}

.progress-fill{
  height:100%;
  background:linear-gradient(90deg,var(--zep-blue),var(--zep-violet));
}

.skill{
  margin-bottom:12px;
}

.footer{
  position:fixed;
  bottom:0;left:0;right:0;
  background:rgba(0,0,0,.55);
  backdrop-filter:blur(10px);
  padding:12px;
  display:flex;
  justify-content:space-around;
}
</style>
</head>

<body>

<header>
  <div class="brand">Zep Swipe ‚Äî Profile</div>
  <div id="zacBal">ZAC: 0</div>
</header>

<div class="container">

  <!-- PROFILE CARD -->
  <div class="card">
    <div class="profile-top">
      <div class="avatar">
        <img id="avatarImg" src="" alt="">
      </div>
      <div>
        <div class="name" id="walletShort">‚Äî</div>
        <div class="small" id="university">University not set</div>
        <input type="file" accept="image/*" onchange="uploadAvatar(event)">
      </div>
    </div>
  </div>

  <!-- BIO -->
  <div class="card">
    <h3>Bio</h3>
    <textarea id="bio" style="width:100%;min-height:80px;border-radius:12px;background:#020617;color:#fff;border:1px solid rgba(255,255,255,.15);padding:10px;"></textarea>
    <button onclick="saveBio()" style="margin-top:10px;">Save Bio</button>
  </div>

  <!-- LEARNING PROGRESS -->
  <div class="card">
    <h3>Learning Progress</h3>
    <div id="skills"></div>
  </div>

  <!-- ACHIEVEMENTS -->
  <div class="card">
    <h3>Achievements</h3>
    <div id="achievements"></div>
  </div>

</div>

<div class="footer">
  <a href="student-dashboard.html">üè†</a>
  <a href="learn-earn.html">üìò</a>
  <a href="wallet.html">üí≥</a>
</div>

<script>
/* -------- LOAD SESSION -------- */
const student = JSON.parse(localStorage.getItem("zepStudent"));
const learn = JSON.parse(localStorage.getItem("zepLearn")) || {zac:0,skills:{}};

if(!student){ location.href="index.html"; }

document.getElementById("walletShort").textContent =
  student.wallet.slice(0,6)+"..."+student.wallet.slice(-4);

document.getElementById("zacBal").textContent = "ZAC: " + learn.zac;

/* -------- AVATAR -------- */
const avatarImg = document.getElementById("avatarImg");
if(student.avatar){ avatarImg.src = student.avatar; }

function uploadAvatar(e){
  const reader = new FileReader();
  reader.onload = ()=>{
    student.avatar = reader.result;
    localStorage.setItem("zepStudent",JSON.stringify(student));
    avatarImg.src = reader.result;
  };
  reader.readAsDataURL(e.target.files[0]);
}

/* -------- BIO -------- */
const bioEl = document.getElementById("bio");
bioEl.value = student.bio || "";

function saveBio(){
  student.bio = bioEl.value;
  localStorage.setItem("zepStudent",JSON.stringify(student));
  alert("Bio saved");
}

/* -------- SKILLS PROGRESS -------- */
const skillsEl = document.getElementById("skills");
Object.keys(learn.skills).forEach(skill=>{
  const s = learn.skills[skill];
  const percent = Math.round(((s.day-1)/21)*100);
  skillsEl.innerHTML += `
    <div class="skill">
      <strong>${skill}</strong>
      <div class="small">Day ${s.day-1}/21</div>
      <div class="progress-bar">
        <div class="progress-fill" style="width:${percent}%"></div>
      </div>
    </div>
  `;
});

/* -------- ACHIEVEMENTS -------- */
const achEl = document.getElementById("achievements");
const completed = Object.entries(learn.skills).filter(([_,s])=>s.day>21);

if(completed.length===0){
  achEl.innerHTML="<div class='small'>No achievements yet</div>";
}else{
  completed.forEach(([skill])=>{
    achEl.innerHTML += `<div>üèÖ ${skill} completed</div>`;
  });
}
</script>

</body>
</html>