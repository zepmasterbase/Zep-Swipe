<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Zep Swipe â€” Student Dashboard</title>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@600;700&family=Poppins:wght@300;400,500,600&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
:root{
  --zep-blue:#00f0ff;
  --zep-violet:#9c4dff;
  --bg:radial-gradient(circle at 30% 10%, #050018, #00000c);
  --glass:rgba(255,255,255,0.08);
  --text-light:rgba(255,255,255,0.85);
}
*{box-sizing:border-box;margin:0;padding:0;font-family:Poppins,sans-serif}
body{background:var(--bg);color:#fff;min-height:100vh;}
header{display:flex;justify-content:space-between;align-items:center;padding:18px;margin:16px;border-radius:16px;background:radial-gradient(circle at center, rgba(0,240,255,.2), rgba(156,77,255,.2));backdrop-filter:blur(14px);}
.brand{font-family:Orbitron;font-size:1.5rem;background:linear-gradient(90deg,var(--zep-blue),var(--zep-violet));-webkit-background-clip:text;-webkit-text-fill-color:transparent;}
.logout-btn{background:rgba(255,255,255,.1);border:none;border-radius:50%;width:38px;height:38px;cursor:pointer;color:#fff;font-size:16px;transition:.3s;}
.logout-btn:hover{background:rgba(255,0,80,.25);}
.dashboard{padding:0 16px 60px;display:flex;flex-direction:column;gap:22px;}
.header-left{display:flex;align-items:center;gap:12px;}
.header-left img{width:48px;height:48px;border-radius:50%;border:2px solid rgba(255,255,255,.3);object-fit:cover;}
.header-left h2{font-family:Orbitron;font-size:1.1rem;}
.header-left span{font-size:.8rem;color:var(--text-light);}
.section{background:var(--glass);border-radius:16px;padding:16px;border:1px solid rgba(255,255,255,.12);}
.section h3{font-family:Orbitron;margin-bottom:12px;}
.task{background:rgba(255,255,255,.05);border-radius:12px;padding:12px;margin-bottom:10px;cursor:pointer;}
.task span{font-size:.8rem;color:var(--text-light);}
.progress{height:6px;background:rgba(255,255,255,.1);border-radius:6px;overflow:hidden;margin-top:6px;}
.progress div{height:100%;background:var(--zep-blue);}
.earnings{display:flex;justify-content:space-between;}
.earnings strong{font-size:1.1rem;}
.verify-bar{height:10px;background:rgba(255,255,255,.1);border-radius:6px;overflow:hidden;margin-bottom:6px;}
.verify-bar div{height:100%;background:linear-gradient(90deg,var(--zep-blue),var(--zep-violet));}
.verify-text{font-size:.85rem;color:var(--text-light);}
.jobs{display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:12px;}
.job{background:rgba(255,255,255,.05);border-radius:12px;padding:10px;cursor:pointer;transition:.3s;position:relative;}
.job:hover{transform:translateY(-2px);box-shadow:0 0 20px rgba(156,77,255,.3);}
.job img{width:100%;height:80px;border-radius:8px;margin-bottom:6px;object-fit:cover;}
.job.applied::after{content:"Applied âœ…";position:absolute;top:8px;right:8px;background:var(--zep-blue);color:#050015;padding:2px 6px;border-radius:6px;font-size:0.7rem;}
.actions{display:grid;grid-template-columns:repeat(2,1fr);gap:10px;}
.actions button{border:none;border-radius:999px;padding:12px;font-family:Orbitron;background:linear-gradient(90deg,var(--zep-blue),var(--zep-violet));color:#050015;cursor:pointer;}
.chart-container{background:var(--glass);border-radius:16px;padding:16px;border:1px solid rgba(255,255,255,.12);}
@media(max-width:480px){.actions{grid-template-columns:1fr}}
</style>
</head>
<body>

<script>
const user = JSON.parse(localStorage.getItem("currentUser"));
if(!user) window.location.href="auth.html";
const appliedJobs = JSON.parse(localStorage.getItem("appliedJobs")) || [];
</script>

<header>
  <div class="header-left">
    <img id="profileImg" src="" alt="Profile">
    <div>
      <span>Welcome back</span>
      <h2 id="studentName"></h2>
      <span id="studentLevel"></span>
    </div>
  </div>
  <button class="logout-btn" onclick="logout()">âŽ‹</button>
</header>

<div class="dashboard">

  <!-- TASKS -->
  <div class="section">
    <h3>Daily Learn & Earn</h3>
    <div class="task" onclick="location.href='learn-earn.html'">
      <strong>Create / Update Profile</strong>
      <span>+5 ZAC Â· 5 mins</span>
      <div class="progress"><div style="width:50%"></div></div>
    </div>
    <div class="task" onclick="location.href='learn-earn.html'">
      <strong>Complete First Tutorial</strong>
      <span>+10 ZAC Â· 15 mins</span>
      <div class="progress"><div style="width:30%"></div></div>
    </div>
  </div>

  <!-- WALLET -->
  <div class="section earnings">
    <div>
      <span>Total ZAC</span>
      <strong id="zacBalance">0</strong>
    </div>
    <div>
      <span>USD Balance</span>
      <strong>$<span id="usdBalance">0</span></strong>
    </div>
  </div>

  <!-- PROFILE COMPLETION -->
  <div class="section">
    <h3>Profile Completion</h3>
    <div class="verify-bar"><div id="completionBar"></div></div>
    <div class="verify-text" id="completionText"></div>
  </div>

  <!-- EARNINGS CHART -->
  <div class="chart-container">
    <h3>Weekly / Monthly Earnings</h3>
    <canvas id="earningsChart" height="200"></canvas>
  </div>

  <!-- AVAILABLE JOBS -->
  <div class="section">
    <h3>Available Jobs</h3>
    <div class="jobs" id="jobsContainer"></div>
  </div>

  <!-- ACTIONS -->
  <div class="section actions">
    <button onclick="location.href='learn-earn.html'">Tasks</button>
    <button onclick="location.href='swipe-merchants.html'">Jobs</button>
    <button onclick="location.href='wallet.html'">Wallet</button>
    <button onclick="location.href='profile.html'">Profile</button>
  </div>

</div>

<script>
document.getElementById("studentName").innerText = user.name || "Student";
document.getElementById("studentLevel").innerText = user.level || "Beginner Freelancer";
document.getElementById("zacBalance").innerText = user.ZAC || 0;
document.getElementById("usdBalance").innerText = user.USD || 0;
document.getElementById("profileImg").src = user.profileImage || "https://images.unsplash.com/photo-1603786321126-4c3d51c6b3f2?auto=format&fit=crop&w=80&q=60";

const completion = user.profileCompletion || 0;
document.getElementById("completionBar").style.width = completion + "%";
document.getElementById("completionText").innerText = completion < 60 ? "Complete your profile to unlock jobs" : "Profile complete â€” jobs unlocked ðŸŽ‰";

/* JOBS */
const jobs = [
  {id:1,title:"Campus Tour Guide",level:"Beginner",img:"https://images.unsplash.com/photo-1603786321126-4c3d51c6b3f2?auto=format&fit=crop&w=400&q=80",price:"$8/hr"},
  {id:2,title:"Research Participant / Lab Assistant",level:"Beginner",img:"https://images.unsplash.com/photo-1603786321126-4c3d51c6b3f2?auto=format&fit=crop&w=400&q=80",price:"$12/hr"},
  {id:3,title:"Online Tutoring",level:"Verified",img:"https://images.unsplash.com/photo-1596495577886-d920f0a25d4c?auto=format&fit=crop&w=400&q=80",price:"$20/hr"},
  {id:4,title:"Website Development",level:"Verified",img:"https://images.unsplash.com/photo-1596495577886-d920f0a25d4c?auto=format&fit=crop&w=400&q=80",price:"$25/hr"}
];

const canApplyBeginner = completion >= 50;
const jobsContainer = document.getElementById("jobsContainer");
function renderJobs(){
  jobsContainer.innerHTML = "";
  jobs.forEach(job=>{
    if(job.level==="Beginner" && !canApplyBeginner) return;
    const card = document.createElement("div");
    card.className = "job";
    if(appliedJobs.includes(job.id)) card.classList.add("applied");
    card.innerHTML = `<img src="${job.img}" alt="${job.title}"><strong>${job.title}</strong><span>${job.level} Â· ${job.price}</span>`;
    card.onclick = ()=>{
      if(appliedJobs.includes(job.id)){
        alert("You already applied âœ…");
      } else {
        const bio = prompt("Write a short bio for your application:");
        if(bio){
          appliedJobs.push(job.id);
          localStorage.setItem("appliedJobs", JSON.stringify(appliedJobs));
          alert("Application submitted!");
          renderJobs();
        }
      }
    };
    jobsContainer.appendChild(card);
  });
}
renderJobs();

/* Earnings Chart */
const ctx = document.getElementById('earningsChart').getContext('2d');
const earningsChart = new Chart(ctx, {
    type: 'bar',
    data: {
        labels: ['Week 1','Week 2','Week 3','Week 4'],
        datasets: [
            {label:'USD Earnings',data:[50, 80, 65, 90],backgroundColor:'rgba(0,240,255,0.7)'},
            {label:'ZAC Rewards',data:[120, 160, 140, 180],backgroundColor:'rgba(156,77,255,0.7)'}
        ]
    },
    options:{responsive:true,plugins:{legend:{labels:{color:'#fff'}}},scales:{y:{beginAtZero:true,ticks:{color:'#fff'}},x:{ticks:{color:'#fff'}}}}
});

/* Logout */
function logout(){
  localStorage.removeItem("currentUser");
  window.location.href="auth.html";
}
</script>
</body>
</html>