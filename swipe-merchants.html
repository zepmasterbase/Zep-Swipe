<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Zep Swipe — Job Marketplace</title>

<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@600;700&family=Poppins:wght@300;400,500,600&display=swap" rel="stylesheet">

<style>
:root{
  --zep-blue:#00f0ff;
  --zep-violet:#9c4dff;
  --bg:radial-gradient(circle at 30% 10%, #050018, #00000c);
  --glass:rgba(255,255,255,0.08);
  --text-light:rgba(255,255,255,0.85);
}

*{box-sizing:border-box;margin:0;padding:0;font-family:Poppins,sans-serif}

body{
  background:var(--bg);
  color:#fff;
  min-height:100vh;
}

/* HEADER */
header{
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:18px;
  margin:16px;
  border-radius:16px;
  background:radial-gradient(circle at center, rgba(0,240,255,.2), rgba(156,77,255,.2));
  backdrop-filter:blur(14px);
}

.brand{
  font-family:Orbitron;
  font-size:1.4rem;
  background:linear-gradient(90deg,var(--zep-blue),var(--zep-violet));
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
}

.header-actions{
  display:flex;
  gap:10px;
}

.header-actions button{
  border:none;
  padding:10px 16px;
  border-radius:999px;
  font-family:Orbitron;
  cursor:pointer;
  transition:.3s;
}

.list-btn{
  background:linear-gradient(90deg,var(--zep-blue),var(--zep-violet));
  color:#050015;
}

.login-btn{
  background:rgba(255,255,255,.12);
  color:#fff;
}

/* PAGE */
.container{
  padding:10px 16px 60px;
  max-width:1200px;
  margin:auto;
}

h2{
  font-family:Orbitron;
  margin:20px 0;
}

/* FILTERS */
.filters{
  display:flex;
  gap:12px;
  margin-bottom:16px;
}

.filters button{
  padding:8px 14px;
  border:none;
  border-radius:999px;
  cursor:pointer;
  font-family:Orbitron;
  transition:.3s;
}

.filters .active{
  background:linear-gradient(90deg,var(--zep-blue),var(--zep-violet));
  color:#050015;
}

.filters button:not(.active){
  background:rgba(255,255,255,.12);
  color:#fff;
}

/* JOB GRID */
.jobs{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(260px,1fr));
  gap:16px;
}

.job{
  background:var(--glass);
  border-radius:16px;
  padding:14px;
  border:1px solid rgba(255,255,255,.12);
  transition:.3s;
  cursor:pointer;
}

.job:hover{
  transform:translateY(-3px);
  box-shadow:0 0 36px rgba(156,77,255,.25);
}

.job img{
  width:100%;
  height:140px;
  border-radius:12px;
  object-fit:cover;
  margin-bottom:10px;
}

.job h3{
  font-size:1rem;
  margin-bottom:6px;
}

.job span{
  font-size:.8rem;
  color:var(--text-light);
}

.job-footer{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-top:10px;
}

.apply-btn{
  border:none;
  padding:8px 14px;
  border-radius:999px;
  background:linear-gradient(90deg,var(--zep-blue),var(--zep-violet));
  color:#050015;
  font-family:Orbitron;
  cursor:pointer;
  font-size:.8rem;
}

.applied{
  background:rgba(0,255,150,.15);
  color:#00ff9d;
  border:1px solid rgba(0,255,150,.3);
  cursor:default;
}

/* JOB MODAL */
.modal{
  position:fixed;
  top:0;
  left:0;
  width:100%;
  height:100%;
  background:rgba(0,0,0,.7);
  display:none;
  justify-content:center;
  align-items:center;
  z-index:1000;
}

.modal-content{
  background:var(--glass);
  padding:20px;
  border-radius:16px;
  max-width:500px;
  width:90%;
  position:relative;
}

.modal-content h3{
  margin-bottom:10px;
}

.modal-content p{
  font-size:0.9rem;
  margin-bottom:10px;
}

.modal-content .close-btn{
  position:absolute;
  top:10px;
  right:10px;
  background:rgba(255,255,255,.1);
  border:none;
  border-radius:50%;
  width:30px;
  height:30px;
  cursor:pointer;
  color:#fff;
}
</style>
</head>
<body>

<header>
  <div class="brand">Zep Swipe</div>
  <div class="header-actions">
    <button class="list-btn" onclick="location.href='employer-auth.html'">List a Job</button>
    <button class="login-btn" onclick="location.href='auth.html'">Login</button>
  </div>
</header>

<div class="container">
  <h2>Browse Jobs</h2>

  <div class="filters">
    <button class="active" data-filter="all">All</button>
    <button data-filter="Beginner">Beginner</button>
    <button data-filter="Verified">Verified</button>
  </div>

  <div class="jobs" id="jobs"></div>
</div>

<!-- JOB MODAL -->
<div class="modal" id="jobModal">
  <div class="modal-content">
    <button class="close-btn" onclick="closeModal()">×</button>
    <h3 id="modalTitle"></h3>
    <p id="modalDesc"></p>
    <p><strong>Rate:</strong> <span id="modalRate"></span></p>
    <p><strong>Level:</strong> <span id="modalLevel"></span></p>
    <button id="modalApplyBtn" class="apply-btn"></button>
  </div>
</div>

<script>
const currentUser = JSON.parse(localStorage.getItem("currentUser"));
let appliedJobs = JSON.parse(localStorage.getItem("appliedJobs")) || [];

/* MOCK JOBS (safe 3D Unsplash images) */
const jobsData = [
  {id:1,title:"Campus Tour Guide",level:"Beginner",rate:"$8/hr",img:"https://images.unsplash.com/photo-1521737604893-d14cc237f11d?auto=format&fit=crop&w=800&q=60",desc:"Guide new students on campus."},
  {id:2,title:"Research Assistant",level:"Beginner",rate:"$10/hr",img:"https://images.unsplash.com/photo-1581091870627-3cbb1b1c47ff?auto=format&fit=crop&w=800&q=60",desc:"Assist in lab research tasks."},
  {id:3,title:"Online Tutor",level:"Verified",rate:"$25/hr",img:"https://images.unsplash.com/photo-1600195077078-fb1caa8c4a5e?auto=format&fit=crop&w=800&q=60",desc:"Provide online tutoring."},
  {id:4,title:"Website Developer",level:"Verified",rate:"$35/hr",img:"https://images.unsplash.com/photo-1587620962725-abab7fe55159?auto=format&fit=crop&w=800&q=60",desc:"Develop websites for clients."}
];

/* FILTER BUTTONS */
const filterBtns = document.querySelectorAll(".filters button");
filterBtns.forEach(btn=>{
  btn.addEventListener("click", ()=>{
    filterBtns.forEach(b=>b.classList.remove("active"));
    btn.classList.add("active");
    renderJobs(btn.getAttribute("data-filter"));
  });
});

const jobsEl = document.getElementById("jobs");

/* RENDER JOBS */
function renderJobs(filter="all"){
  jobsEl.innerHTML = "";
  let filtered = jobsData;
  if(filter !== "all") filtered = jobsData.filter(j=>j.level === filter);

  filtered.forEach(job=>{
    const isApplied = appliedJobs.includes(job.id);

    const div = document.createElement("div");
    div.className="job";
    div.innerHTML=`
      <img src="${job.img}">
      <h3>${job.title}</h3>
      <span>${job.level} • ${job.rate}</span>
      <div class="job-footer">
        <span>${job.level}</span>
        <button class="apply-btn ${isApplied ? 'applied' : ''}">
          ${isApplied ? 'Applied ✅' : 'Apply'}
        </button>
      </div>
    `;
    jobsEl.appendChild(div);

    /* OPEN MODAL ON CLICK */
    div.querySelector("img").addEventListener("click", ()=>{
      openModal(job);
    });

    /* APPLY BUTTON */
    const btn = div.querySelector("button");
    if(!isApplied){
      btn.addEventListener("click", ()=>{
        if(!currentUser){
          alert("Login to apply for jobs.");
          location.href="auth.html";
          return;
        }
        appliedJobs.push(job.id);
        localStorage.setItem("appliedJobs", JSON.stringify(appliedJobs));
        btn.innerText="Applied ✅";
        btn.classList.add("applied");
      });
    }
  });
}

/* MODAL LOGIC */
const modal = document.getElementById("jobModal");
const modalTitle = document.getElementById("modalTitle");
const modalDesc = document.getElementById("modalDesc");
const modalRate = document.getElementById("modalRate");
const modalLevel = document.getElementById("modalLevel");
const modalApplyBtn = document.getElementById("modalApplyBtn");

function openModal(job){
  modal.style.display="flex";
  modalTitle.innerText=job.title;
  modalDesc.innerText=job.desc;
  modalRate.innerText=job.rate;
  modalLevel.innerText=job.level;
  
  const isApplied = appliedJobs.includes(job.id);
  modalApplyBtn.innerText = isApplied ? "Applied ✅" : "Apply";
  modalApplyBtn.className = isApplied ? "apply-btn applied" : "apply-btn";

  modalApplyBtn.onclick = ()=>{
    if(!currentUser){
      alert("Login to apply for jobs.");
      location.href="auth.html";
      return;
    }
    if(!isApplied){
      appliedJobs.push(job.id);
      localStorage.setItem("appliedJobs", JSON.stringify(appliedJobs));
      modalApplyBtn.innerText="Applied ✅";
      modalApplyBtn.classList.add("applied");
      renderJobs(document.querySelector(".filters .active").getAttribute("data-filter"));
    }
  }
}

function closeModal(){
  modal.style.display="none";
}

renderJobs();
</script>
</body>
</html>