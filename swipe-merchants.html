<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Zep Swipe — Job Marketplace</title>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@600;700&family=Poppins:wght@300;400,500,600&display=swap" rel="stylesheet">
<style>
:root{
  --zep-blue:#00f0ff;
  --zep-violet:#9c4dff;
  --bg:radial-gradient(circle at 30% 10%, #050018, #00000c);
  --glass:rgba(255,255,255,0.08);
  --text-light:rgba(255,255,255,0.85);
}
*{box-sizing:border-box;margin:0;padding:0;font-family:Poppins,sans-serif}
body{background:var(--bg);color:#fff;min-height:100vh;}
header{
  display:flex;justify-content:space-between;align-items:center;
  padding:16px;margin:16px;border-radius:16px;
  background:radial-gradient(circle at center, rgba(0,240,255,.2), rgba(156,77,255,.2));
  backdrop-filter:blur(14px);
}
.brand{font-family:Orbitron;font-size:1.5rem;background:linear-gradient(90deg,var(--zep-blue),var(--zep-violet));-webkit-background-clip:text;-webkit-text-fill-color:transparent;}
.logout-btn{background:rgba(255,255,255,.1);border:none;border-radius:50%;width:38px;height:38px;cursor:pointer;color:#fff;font-size:16px;transition:.3s;}
.logout-btn:hover{background:rgba(255,0,80,.25);}
.actions{display:flex;gap:10px;margin:16px 16px 0;}
.actions button{flex:1;border:none;border-radius:999px;padding:12px;font-family:Orbitron;background:linear-gradient(90deg,var(--zep-blue),var(--zep-violet));color:#050015;cursor:pointer;}
.actions button:hover{transform:translateY(-2px);box-shadow:0 0 20px rgba(156,77,255,.3);}
.jobs-container{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:16px;padding:16px;}
.job-card{background:var(--glass);border-radius:16px;padding:12px;cursor:pointer;transition:.3s;border:1px solid rgba(255,255,255,.12);}
.job-card:hover{transform:translateY(-2px);box-shadow:0 0 20px rgba(156,77,255,.3);}
.job-card img{width:100%;height:120px;object-fit:cover;border-radius:8px;margin-bottom:8px;}
.job-card strong{display:block;margin-bottom:4px;}
.job-card span{font-size:.85rem;color:var(--text-light);}
.applied{opacity:0.7;position:relative;}
.applied::after{content:"Applied ✅";position:absolute;top:8px;right:8px;background:var(--zep-blue);color:#050015;padding:2px 6px;border-radius:6px;font-size:0.7rem;}
.filter-container{display:flex;gap:12px;margin:16px;}
</style>
</head>
<body>

<script>
/* SESSION PROTECTION */
const user = JSON.parse(localStorage.getItem("currentUser"));
if(!user) window.location.href="auth.html";
</script>

<header>
  <div class="brand">Zep Swipe Jobs</div>
  <button class="logout-btn" onclick="logout()">⎋</button>
</header>

<div class="actions">
  <button onclick="location.href='employer-auth.html'">List a Job</button>
  <button onclick="filterJobs('All')">All Jobs</button>
  <button onclick="filterJobs('Beginner')">Beginner</button>
  <button onclick="filterJobs('Verified')">Verified</button>
</div>

<div class="jobs-container" id="jobsContainer">
  <!-- Jobs dynamically populated here -->
</div>

<script>
const jobs = [
  {id:1,title:"Campus Tour Guide",level:"Beginner",img:"https://images.unsplash.com/photo-1581091012184-6e89b7a4e360?auto=format&fit=crop&w=400&q=80",price:"$8/hr"},
  {id:2,title:"Research Participant / Lab Assistant",level:"Beginner",img:"https://images.unsplash.com/photo-1581091012184-6e89b7a4e360?auto=format&fit=crop&w=400&q=80",price:"$12/hr"},
  {id:3,title:"Online Tutoring",level:"Verified",img:"https://images.unsplash.com/photo-1596495577886-d920f0a25d4c?auto=format&fit=crop&w=400&q=80",price:"$20/hr"},
  {id:4,title:"Website Development",level:"Verified",img:"https://images.unsplash.com/photo-1557804506-669a67965ba0?auto=format&fit=crop&w=400&q=80",price:"$25/hr"},
  {id:5,title:"Graphic Design",level:"Verified",img:"https://images.unsplash.com/photo-1603039499387-1e0c7fa8d8d3?auto=format&fit=crop&w=400&q=80",price:"$30/hr"},
  {id:6,title:"Content Writing",level:"Verified",img:"https://images.unsplash.com/photo-1522202176988-66273c2fd55f?auto=format&fit=crop&w=400&q=80",price:"$18/hr"}
];

// Track applied jobs
let appliedJobs = JSON.parse(localStorage.getItem("appliedJobs")) || [];

// Determine if beginner jobs are unlocked
const tasksCompletion = user.profileCompletion || 0;
const canApplyBeginner = tasksCompletion >= 50; // example threshold

function renderJobs(filter="All"){
  const container = document.getElementById("jobsContainer");
  container.innerHTML = "";
  jobs.forEach(job=>{
    // Unlock rules
    if(job.level==="Beginner" && !canApplyBeginner) return;
    if(filter!=="All" && job.level!==filter) return;
    
    const card = document.createElement("div");
    card.className = "job-card";
    if(appliedJobs.includes(job.id)) card.classList.add("applied");
    
    card.innerHTML = `
      <img src="${job.img}" alt="${job.title}">
      <strong>${job.title}</strong>
      <span>${job.level} · ${job.price}</span>
    `;
    card.onclick = ()=>{
      if(appliedJobs.includes(job.id)){
        alert("You already applied to this job ✅");
      } else {
        const bio = prompt("Write a short bio for your application:");
        if(bio){
          appliedJobs.push(job.id);
          localStorage.setItem("appliedJobs", JSON.stringify(appliedJobs));
          alert("Application sent!");
          renderJobs(filter); // refresh to show applied
        }
      }
    }
    container.appendChild(card);
  });
}

function filterJobs(level){
  renderJobs(level);
}

function logout(){localStorage.removeItem("currentUser");window.location.href="index.html";}

// Initial render
renderJobs();
</script>
</body>
</html>