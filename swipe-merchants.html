<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Zep Swipe — Marketplace</title>

<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@600;700&family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet"/>
<script src="https://cdn.jsdelivr.net/npm/ethers@6.6.0/dist/ethers.min.js"></script>

<style>
:root{
  --zep-blue:#00f0ff;
  --zep-violet:#9c4dff;
  --glass:rgba(255,255,255,0.06);
  --bg:radial-gradient(circle at 25% 10%, #04001a 0%, #000010 100%);
}
*{box-sizing:border-box}
body{
  margin:0;
  font-family:Poppins,sans-serif;
  background:var(--bg);
  color:#fff;
}
.container{
  max-width:1100px;
  margin:26px auto 120px;
  padding:16px;
}

/* HEADER */
.header{
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:16px 18px;
  border-radius:18px;
  background:var(--glass);
  border:1px solid rgba(255,255,255,.12);
  backdrop-filter:blur(16px);
  box-shadow:0 0 34px rgba(0,240,255,.25);
}
.brand{
  font-family:Orbitron;
  font-size:1.4rem;
  background:linear-gradient(90deg,var(--zep-blue),var(--zep-violet));
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
}
.header-actions{
  display:flex;
  gap:10px;
}
.icon-btn{
  width:46px;height:46px;
  border-radius:14px;
  display:flex;align-items:center;justify-content:center;
  background:linear-gradient(135deg,var(--zep-blue),var(--zep-violet));
  color:#050015;
  font-size:20px;
  cursor:pointer;
  box-shadow:0 0 26px rgba(0,240,255,.4);
}

/* GRID */
.section-title{
  margin:28px 0 14px;
  font-family:Orbitron;
  font-size:1.1rem;
  background:linear-gradient(90deg,var(--zep-blue),var(--zep-violet));
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
}
.grid{
  display:grid;
  grid-template-columns:repeat(2,1fr);
  gap:18px;
}
@media(max-width:700px){
  .grid{grid-template-columns:1fr}
}

/* CARD */
.card{
  padding:18px;
  border-radius:18px;
  background:rgba(0,0,0,.65);
  border:1px solid rgba(255,255,255,.12);
  display:flex;
  flex-direction:column;
  gap:10px;
}
.card h3{
  margin:0;
  font-family:Orbitron;
  font-size:1rem;
}
.card p{
  font-size:12px;
  opacity:.85;
}
.price{
  font-family:Orbitron;
  font-size:1.05rem;
}
.actions{
  display:flex;
  gap:8px;
  margin-top:6px;
}
.btn{
  flex:1;
  padding:10px;
  border-radius:999px;
  border:none;
  cursor:pointer;
  font-family:Orbitron;
  font-size:12px;
  background:linear-gradient(90deg,var(--zep-blue),var(--zep-violet));
  color:#050015;
}
.btn.secondary{
  background:none;
  border:1px solid rgba(255,255,255,.25);
  color:#fff;
}

/* SELL CTA */
.sell-box{
  margin-top:30px;
  padding:20px;
  border-radius:20px;
  background:rgba(0,0,0,.7);
  border:1px solid rgba(0,240,255,.4);
  text-align:center;
}
.badge{
  display:inline-block;
  padding:6px 14px;
  border-radius:999px;
  background:linear-gradient(90deg,var(--zep-blue),var(--zep-violet));
  color:#050015;
  font-family:Orbitron;
  font-size:11px;
}
.small{font-size:12px;opacity:.8}
</style>
</head>

<body>

<div class="container">

  <!-- HEADER -->
  <div class="header">
    <div class="brand">Swipe Merchants</div>
    <div class="header-actions">
      <div class="icon-btn" title="Logout" onclick="logout()">⎋</div>
    </div>
  </div>

  <!-- MARKETPLACE -->
  <div class="section-title">Student Creator Services</div>
  <div class="grid" id="market"></div>

  <!-- SELL ACCESS -->
  <div class="sell-box" id="sellBox" style="display:none">
    <h3 class="section-title">Sell on Swipe</h3>
    <p class="small">Complete at least <b>21 days of skill proof</b> to list services.</p>
    <span class="badge">Verified Creators Only</span>
  </div>

</div>

<script>
/* SESSION */
const session = JSON.parse(localStorage.getItem("zepSession")) || {};
const student = JSON.parse(localStorage.getItem("zepStudent")) || {};
const progress = JSON.parse(localStorage.getItem("zepProgress")) || {};

/* SAMPLE GIGS */
const gigs=[
 {
  title:"AI Content Writer",
  desc:"Blogs, threads & captions with AI",
  price:25,
  seller:"0xSELLER1",
  profile:"seller-profile.html"
 },
 {
  title:"No-Code Website",
  desc:"Landing pages in Webflow/Framer",
  price:40,
  seller:"0xSELLER2",
  profile:"seller-profile.html"
 },
 {
  title:"Video Editor",
  desc:"Short-form reels & TikTok edits",
  price:30,
  seller:"0xSELLER3",
  profile:"seller-profile.html"
 },
 {
  title:"Research Assistant",
  desc:"Lead gen & data cleanup",
  price:20,
  seller:"0xSELLER4",
  profile:"seller-profile.html"
 }
];

const market=document.getElementById("market");

/* RENDER */
gigs.forEach((g,i)=>{
 const d=document.createElement("div");
 d.className="card";
 d.innerHTML=`
  <h3>${g.title}</h3>
  <p>${g.desc}</p>
  <div class="price">${g.price} USDC</div>
  <div class="actions">
    <button class="btn" onclick="buy(${i})">Buy</button>
    <button class="btn secondary" onclick="viewSeller()">Seller</button>
  </div>
 `;
 market.appendChild(d);
});

/* BUY */
async function buy(i){
 if(!window.ethereum){
  alert("Wallet required");
  return;
 }
 alert("Payment flow:\nUSDC → Seller Wallet\n(Chat opens after payment)");
 window.location.href="order-chat.html";
}

/* SELLER PROFILE */
function viewSeller(){
 window.location.href="seller-profile.html";
}

/* SELL ACCESS */
let completed=0;
Object.values(progress).forEach(p=>{
 completed+=Math.max(0,(p.day||1)-1);
});

if(!student.verified && session.role==="student"){
 document.getElementById("sellBox").style.display="block";
}

/* LOGOUT */
function logout(){
 localStorage.removeItem("zepSession");
 window.location.href="index.html";
}
</script>

</body>
</html>