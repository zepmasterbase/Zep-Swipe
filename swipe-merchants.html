<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Swipe Merchants — Zep Swipe</title>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@600;700&family=Poppins:wght@300;400;500,600&display=swap" rel="stylesheet">
<style>
:root{
  --zep-blue:#00f0ff;
  --zep-violet:#9c4dff;
  --bg:radial-gradient(circle at 30% 10%, #050018, #00000c);
  --glass:rgba(255,255,255,0.08);
  --text-light:rgba(255,255,255,0.85);
}
*{box-sizing:border-box;margin:0;padding:0;font-family:Poppins,sans-serif}
body{background:var(--bg);color:#fff;min-height:100vh;}
header{
  display:flex;align-items:center;justify-content:space-between;padding:16px;margin:16px;border-radius:16px;background:radial-gradient(circle at center, rgba(0,240,255,.2), rgba(156,77,255,.2));backdrop-filter:blur(14px);
}
.brand{font-family:Orbitron;font-size:1.5rem;background:linear-gradient(90deg,var(--zep-blue),var(--zep-violet));-webkit-background-clip:text;-webkit-text-fill-color:transparent;}
.logout-btn{background:rgba(255,255,255,.1);border:none;border-radius:50%;width:38px;height:38px;cursor:pointer;color:#fff;font-size:16px;}
.logout-btn:hover{background:rgba(255,0,80,.25);}
.filter-section{display:flex;justify-content:flex-start;gap:10px;margin:16px;}
.filter-section button{padding:8px 16px;border:none;border-radius:999px;background:linear-gradient(90deg,var(--zep-blue),var(--zep-violet));cursor:pointer;color:#050015;font-family:Orbitron;font-weight:600;transition:.3s;}
.filter-section button.active{box-shadow:0 0 36px rgba(156,77,255,.45);}
.filter-section button:hover{transform:translateY(-2px);}
.jobs-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:16px;margin:16px;}
.job-card{background:var(--glass);border-radius:16px;padding:12px;border:1px solid rgba(255,255,255,.12);cursor:pointer;transition:.3s;display:flex;flex-direction:column;justify-content:space-between;}
.job-card:hover{transform:translateY(-2px);box-shadow:0 0 36px rgba(156,77,255,.25);}
.job-card img{width:100%;height:120px;border-radius:12px;object-fit:cover;margin-bottom:8px;}
.job-card strong{font-family:Orbitron;margin-bottom:4px;}
.job-card span{font-size:0.85rem;color:var(--text-light);}
.apply-btn{padding:8px 0;border:none;border-radius:999px;background:linear-gradient(90deg,var(--zep-blue),var(--zep-violet));color:#050015;font-family:Orbitron;font-weight:600;cursor:pointer;transition:.3s;margin-top:8px;}
.apply-btn.applied{background:rgba(0,255,128,.8);color:#050015;cursor:default;}
.apply-btn:hover:not(.applied){transform:translateY(-2px);box-shadow:0 0 36px rgba(156,77,255,.45);}
@media(max-width:480px){.jobs-grid{grid-template-columns:1fr;}}
</style>
</head>
<body>

<header>
  <div class="brand">Zep Swipe</div>
  <button class="logout-btn" onclick="logout()">⎋</button>
</header>

<!-- Job Filter -->
<div class="filter-section">
  <button class="active" onclick="filterJobs('All', this)">All</button>
  <button onclick="filterJobs('Beginner', this)">Beginner</button>
  <button onclick="filterJobs('Verified', this)">Verified</button>
</div>

<!-- Jobs -->
<div class="jobs-grid" id="jobsGrid">
  <!-- Job cards will be inserted here dynamically -->
</div>

<script>
/* SESSION PROTECTION */
const user = JSON.parse(localStorage.getItem("currentUser"));
if(!user){ window.location.href="index.html"; }

/* Logout */
function logout(){
  localStorage.removeItem("currentUser");
  window.location.href="index.html";
}

/* Sample 3D images for jobs (Unsplash stable links) */
const placeholderImages = [
  "https://images.unsplash.com/photo-1612831455549-8310b7cc9a3a?auto=format&fit=crop&w=400&q=80",
  "https://images.unsplash.com/photo-1590608897129-79a8b71fc2cc?auto=format&fit=crop&w=400&q=80",
  "https://images.unsplash.com/photo-1601758123927-7e05d6e35e25?auto=format&fit=crop&w=400&q=80",
  "https://images.unsplash.com/photo-1612832020201-60b0832f8e77?auto=format&fit=crop&w=400&q=80"
];

/* Load Jobs */
function loadJobs(){
  let jobs = JSON.parse(localStorage.getItem("jobs")) || [];

  // Mockup jobs if none
  if(jobs.length===0){
    jobs = [
      {id:1,title:"Campus Tour Guide",desc:"Guide students for campus tours",category:"Beginner",price:10,image:placeholderImages[0]},
      {id:2,title:"Research Participant",desc:"Assist lab research",category:"Beginner",price:12,image:placeholderImages[1]},
      {id:3,title:"Online Tutoring",desc:"Teach Math/Science",category:"Verified",price:25,image:placeholderImages[2]},
      {id:4,title:"Graphic Design",desc:"Create flyers/posters",category:"Verified",price:30,image:placeholderImages[3]},
    ];
    localStorage.setItem("jobs",JSON.stringify(jobs));
  }
  return jobs;
}

/* Render Jobs */
function renderJobs(filter="All"){
  const jobs = loadJobs();
  const appliedJobs = JSON.parse(localStorage.getItem("appliedJobs")) || [];
  const grid = document.getElementById("jobsGrid");
  grid.innerHTML = "";

  jobs.forEach(job=>{
    if(filter!=="All" && job.category!==filter) return;

    const card = document.createElement("div");
    card.classList.add("job-card");

    const img = document.createElement("img");
    img.src = job.image || placeholderImages[0];
    img.alt = job.title;
    card.appendChild(img);

    const title = document.createElement("strong");
    title.textContent = job.title;
    card.appendChild(title);

    const desc = document.createElement("span");
    desc.textContent = job.desc + " · $" + job.price+"/hr";
    card.appendChild(desc);

    const btn = document.createElement("button");
    btn.classList.add("apply-btn");

    if(appliedJobs.includes(job.id)){
      btn.textContent = "Applied ✅";
      btn.classList.add("applied");
    } else {
      btn.textContent = "Apply";
      btn.addEventListener("click", ()=>{
        appliedJobs.push(job.id);
        localStorage.setItem("appliedJobs", JSON.stringify(appliedJobs));
        btn.textContent = "Applied ✅";
        btn.classList.add("applied");
        alert("You applied to "+job.title);
      });
    }

    card.appendChild(btn);
    grid.appendChild(card);
  });
}

/* Filtering */
function filterJobs(category, button){
  document.querySelectorAll(".filter-section button").forEach(b=>b.classList.remove("active"));
  button.classList.add("active");
  renderJobs(category);
}

/* Initial Render */
renderJobs();
</script>

</body>
</html>