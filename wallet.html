<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Zep Swipe ‚Äî Wallet</title>

<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@600;700&family=Poppins:wght@400;500;600&display=swap" rel="stylesheet"/>
<script src="https://cdn.jsdelivr.net/npm/ethers@6.6.0/dist/ethers.min.js"></script>

<style>
:root{
  --zep-blue:#00f0ff;
  --zep-violet:#9c4dff;
  --bg:radial-gradient(circle at 25% 10%, #020014 0%, #00000a 100%);
  --glass:rgba(255,255,255,0.06);
}
*{box-sizing:border-box}
body{
  margin:0;
  font-family:Poppins,sans-serif;
  background:var(--bg);
  color:#fff;
  overflow-x:hidden;
}
.container{
  max-width:900px;
  margin:26px auto 120px;
  padding:16px;
}

/* Header */
.header{
  padding:18px;
  border-radius:18px;
  background:var(--glass);
  border:1px solid rgba(255,255,255,.12);
  backdrop-filter:blur(16px);
  display:flex;
  justify-content:space-between;
  align-items:center;
  box-shadow:0 0 30px rgba(0,240,255,.25);
}
.brand{
  font-family:Orbitron;
  font-size:1.5rem;
  background:linear-gradient(90deg,var(--zep-blue),var(--zep-violet));
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
}
.addr{
  font-family:Orbitron;
  font-size:.85rem;
  color:#d7faff;
  cursor:pointer;
}

/* Wallet card */
.wallet-card{
  margin-top:20px;
  padding:18px;
  border-radius:20px;
  background:rgba(255,255,255,.05);
  border:1px solid rgba(255,255,255,.12);
}
.section-title{
  font-family:Orbitron;
  font-size:1.1rem;
  background:linear-gradient(90deg,var(--zep-blue),var(--zep-violet));
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
  margin-bottom:14px;
}

/* Asset rows */
.asset{
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding:14px;
  border-radius:16px;
  background:rgba(0,0,0,.55);
  border:1px solid rgba(255,255,255,.12);
  margin-bottom:12px;
}
.asset-left{
  display:flex;
  gap:14px;
  align-items:center;
}
.coin{
  width:54px;height:54px;
  border-radius:14px;
  background:linear-gradient(135deg,var(--zep-blue),var(--zep-violet));
  display:flex;align-items:center;justify-content:center;
  font-family:Orbitron;
  font-size:16px;
  color:#050015;
}
.asset-name{
  font-family:Orbitron;
  font-size:.9rem;
}
.asset-sub{
  font-size:11px;
  opacity:.8;
}
.asset-right{
  text-align:right;
}
.asset-right strong{
  font-family:Orbitron;
}
.asset-actions{
  margin-top:6px;
  display:flex;
  gap:6px;
}
.btn{
  padding:6px 10px;
  font-size:11px;
  border-radius:999px;
  border:none;
  cursor:pointer;
  font-family:Orbitron;
  background:linear-gradient(90deg,var(--zep-blue),var(--zep-violet));
  color:#050015;
}
.btn.secondary{
  background:none;
  border:1px solid rgba(255,255,255,.25);
  color:#fff;
}

/* Activity */
.activity{
  margin-top:20px;
  padding:16px;
  border-radius:18px;
  background:rgba(255,255,255,.04);
  border:1px solid rgba(255,255,255,.12);
}
.tx{
  font-size:12px;
  opacity:.85;
  margin-bottom:8px;
}

/* Footer */
.footer{
  position:fixed;
  bottom:0;left:0;right:0;
  padding:14px 22px;
  background:rgba(0,0,0,.55);
  display:flex;
  justify-content:space-around;
  backdrop-filter:blur(10px);
}
.fbtn{
  width:56px;height:56px;
  border-radius:18px;
  background:rgba(255,255,255,.05);
  display:flex;align-items:center;justify-content:center;
  text-decoration:none;color:#fff;
}
</style>
</head>

<body>

<div class="container">

  <!-- HEADER -->
  <div class="header">
    <div class="brand">Zep Swipe ¬∑ Wallet</div>
    <div id="walletAddr" class="addr" onclick="copyAddr()">‚Äî</div>
  </div>

  <!-- WALLET -->
  <div class="wallet-card">
    <div class="section-title">Assets (Base Network)</div>

    <!-- ZAC -->
    <div class="asset">
      <div class="asset-left">
        <div class="coin">ZAC</div>
        <div>
          <div class="asset-name">Zep Cash</div>
          <div class="asset-sub">Rewards ¬∑ Locked</div>
        </div>
      </div>
      <div class="asset-right">
        <strong id="zacBal">0 ZAC</strong>
        <div class="asset-actions">
          <button class="btn secondary" onclick="copyAddr()">Receive</button>
        </div>
      </div>
    </div>

    <!-- USDC -->
    <div class="asset">
      <div class="asset-left">
        <div class="coin">USDC</div>
        <div>
          <div class="asset-name">USD Coin</div>
          <div class="asset-sub">Payments</div>
        </div>
      </div>
      <div class="asset-right">
        <strong id="usdcBal">‚Äî</strong>
        <div class="asset-actions">
          <button class="btn secondary" onclick="copyAddr()">Receive</button>
          <button class="btn" onclick="sendAlert('USDC')">Send</button>
        </div>
      </div>
    </div>

    <!-- ETH -->
    <div class="asset">
      <div class="asset-left">
        <div class="coin">ETH</div>
        <div>
          <div class="asset-name">Ethereum</div>
          <div class="asset-sub">Gas & transfers</div>
        </div>
      </div>
      <div class="asset-right">
        <strong id="ethBal">‚Äî</strong>
        <div class="asset-actions">
          <button class="btn secondary" onclick="copyAddr()">Receive</button>
          <button class="btn" onclick="sendAlert('ETH')">Send</button>
        </div>
      </div>
    </div>
  </div>

  <!-- ACTIVITY -->
  <div class="activity">
    <div class="section-title">Activity</div>
    <div id="activityList">
      <div class="tx">üéì Earned 25 ZAC ‚Äî Learn & Earn</div>
    </div>
  </div>

</div>

<!-- FOOTER -->
<div class="footer">
  <a class="fbtn" href="dashboard-student.html">üè†</a>
  <a class="fbtn" href="learn-earn.html">üéì</a>
  <a class="fbtn" href="profile.html">üë§</a>
</div>

<script>
const USDC = "0x833589fcd6edb6e08f4c7c32d4f71b54bda02913";
const ERC20_ABI=[
  "function balanceOf(address) view returns(uint256)",
  "function decimals() view returns(uint8)"
];

function short(a){return a.slice(0,6)+"..."+a.slice(-4)}

function copyAddr(){
  const s=JSON.parse(localStorage.getItem("zepStudent"));
  navigator.clipboard.writeText(s.wallet);
  alert("Wallet address copied");
}

function sendAlert(asset){
  alert(asset+" sending enabled via connected wallet.\n(ZAC is locked)");
}

window.onload=async()=>{
  const s=JSON.parse(localStorage.getItem("zepStudent"));
  if(!s){location.href="student-login.html";return;}

  document.getElementById("walletAddr").textContent=short(s.wallet);

  document.getElementById("zacBal").textContent=
    (s.zacAmount||0)+" ZAC";

  const provider=new ethers.JsonRpcProvider("https://mainnet.base.org");

  // USDC
  try{
    const c=new ethers.Contract(USDC,ERC20_ABI,provider);
    const d=await c.decimals();
    const b=await c.balanceOf(s.wallet);
    document.getElementById("usdcBal").textContent=
      Number(ethers.formatUnits(b,d)).toFixed(2)+" USDC";
  }catch{
    document.getElementById("usdcBal").textContent="0.00 USDC";
  }

  // ETH
  try{
    const e=await provider.getBalance(s.wallet);
    document.getElementById("ethBal").textContent=
      Number(ethers.formatEther(e)).toFixed(4)+" ETH";
  }catch{
    document.getElementById("ethBal").textContent="0.0000 ETH";
  }
};
</script>

</body>
</html>