<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Zep Swipe — Wallet</title>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@600;700&family=Poppins:wght@300;400,500,600&display=swap" rel="stylesheet">
<style>
:root{
  --zep-blue:#00f0ff;
  --zep-violet:#9c4dff;
  --accent:#00ff9d;
  --bg:radial-gradient(circle at 30% 10%, #050018, #00000c);
  --glass:rgba(255,255,255,.05);
  --text-light:rgba(255,255,255,.85);
  --card-bg:rgba(255,255,255,.08);
  --highlight:#ffea00;
}

/* RESET */
*{box-sizing:border-box;margin:0;padding:0;font-family:Poppins,sans-serif;}
body{background:var(--bg);color:#fff;min-height:100vh;line-height:1.4;overflow-x:hidden;}
a{text-decoration:none;color:inherit;}
button{cursor:pointer;border:none;}

/* HEADER */
header{
  display:flex;justify-content:space-between;align-items:center;
  padding:16px 20px;max-width:1200px;margin:auto;margin-top:10px;
  border-radius:12px;background:rgba(0,0,0,0.15);backdrop-filter:blur(6px);
}
.brand{
  font-family:Orbitron;
  font-size:1.6rem;
  background:linear-gradient(90deg,var(--zep-blue),var(--zep-violet));
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
  animation: pulseGlow 2s infinite;
}
.home-btn{background:var(--zep-blue);color:#050015;padding:6px 12px;border-radius:12px;font-weight:700;transition:.3s;}
.home-btn:hover{transform:scale(1.05);}
@keyframes pulseGlow{
  0% { text-shadow: 0 0 5px var(--zep-blue),0 0 10px var(--zep-violet); transform: scale(1);}
  50% { text-shadow: 0 0 15px var(--zep-blue),0 0 25px var(--zep-violet); transform: scale(1.05);}
  100% { text-shadow: 0 0 5px var(--zep-blue),0 0 10px var(--zep-violet); transform: scale(1);}
}

/* PROFILE CARD */
.profile-card{
  max-width:1200px;
  margin:20px auto;
  padding:16px 20px;
  display:flex;align-items:center;justify-content:space-between;
  background:var(--card-bg);border-radius:16px;backdrop-filter:blur(6px);
}
.profile-card div span{display:block;}
.profile-card .verified{
  color:var(--accent);
  font-weight:700;
}

/* WALLET OVERVIEW */
.wallet-overview{
  max-width:1200px;
  margin:20px auto;
  display:flex;flex-wrap:wrap;gap:16px;padding:0 20px;
}
.wallet-card{
  flex:1 1 220px;
  background:var(--card-bg);
  border-radius:16px;
  padding:16px;
  text-align:center;
  backdrop-filter:blur(6px);
  transition:.3s;
  position:relative;
}
.wallet-card:hover{transform:translateY(-2px) scale(1.02);box-shadow:0 0 20px var(--zep-blue),0 0 40px var(--zep-violet);}
.wallet-card h3{font-family:Orbitron;margin-bottom:8px;}
.wallet-card p{color:var(--text-light);}
.wallet-card button{
  margin-top:10px;
  padding:8px 16px;
  border-radius:999px;
  background:linear-gradient(90deg,var(--zep-blue),var(--zep-violet));
  color:#050015;font-family:Orbitron;font-weight:700;
  cursor:pointer;
  transition:.3s;
}
.wallet-card button:hover{transform:translateY(-2px) scale(1.02);box-shadow:0 0 15px var(--zep-blue),0 0 30px var(--zep-violet);}

/* PORTFOLIO 3D */
#portfolio3D{
  max-width:1200px;
  margin:20px auto;
  padding:0 20px;
  height:300px;
  background:rgba(255,255,255,0.05);
  border-radius:16px;
  display:flex;justify-content:center;align-items:center;
  font-size:1.2rem;color:var(--text-light);
  perspective:1000px;transition:transform 0.5s;
}
#portfolio3D:hover{transform:rotateY(15deg) rotateX(5deg);}

/* FOOTER */
footer{text-align:center;padding:20px 10px;margin-top:40px;border-top:1px solid rgba(255,255,255,.1);color:var(--text-light);font-size:0.85rem;}

/* MODAL */
.modal{
  display:none;position:fixed;top:0;left:0;width:100%;height:100%;
  background:rgba(0,0,0,0.7);justify-content:center;align-items:center;z-index:1000;
}
.modal-content{
  background:var(--card-bg);padding:20px;border-radius:16px;max-width:400px;width:90%;backdrop-filter:blur(6px);
  text-align:center;
  position:relative;
}
.modal-content h3{margin-bottom:12px;}
.modal-content input, .modal-content select{
  width:100%;padding:10px;border-radius:12px;border:none;margin-bottom:12px;background:rgba(255,255,255,0.1);color:#fff;outline:none;
}
.modal-content button{
  width:100%;padding:12px;border-radius:50%;background:var(--zep-blue);color:#050015;font-weight:700;transition:.3s;position:relative;
}
.modal-content button.confirming::after{
  content:"";
  position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);
  width:24px;height:24px;border:3px solid #fff;border-top-color:transparent;border-radius:50%;
  animation:spin 1s linear infinite;
}
@keyframes spin{
  0%{transform:translate(-50%,-50%) rotate(0deg);}
  100%{transform:translate(-50%,-50%) rotate(360deg);}
}

/* TRANSACTION HISTORY */
#transactionHistory{
  max-width:1200px;margin:20px auto;padding:0 20px;
}
.transaction-card{
  background:var(--card-bg);padding:12px 16px;border-radius:12px;margin-bottom:10px;display:flex;justify-content:space-between;align-items:center;
  backdrop-filter:blur(6px);
}
.transaction-card span{color:var(--text-light);font-size:0.85rem;}
</style>
</head>
<body>

<header>
  <div class="brand">Zep Swipe</div>
  <button class="home-btn" onclick="location.href='student-dashboard.html'">Home</button>
</header>

<!-- PROFILE CARD -->
<div class="profile-card">
  <div>
    <span id="studentName">Student Name</span>
    <span id="studentUni">University</span>
    <span id="studentProgram">Program: <strong>--</strong></span>
    <span id="verifiedStatus" class="verified">Verified Freelancer</span>
  </div>
  <div class="wallet-total">
    <h3>Total Portfolio</h3>
    <p><span id="totalPortfolio">0</span> USD</p>
  </div>
</div>

<!-- WALLET OVERVIEW -->
<div class="wallet-overview">
  <div class="wallet-card">
    <h3>ZAC Balance</h3>
    <p><span id="zacBalance">0</span> ZAC</p>
    <button disabled>ZAC Locked</button>
  </div>
  <div class="wallet-card">
    <h3>USD Balance</h3>
    <p><span id="usdBalance">0</span> USD</p>
    <button id="withdrawBtn">Withdraw</button>
  </div>
</div>

<!-- 3D Portfolio Preview -->
<div id="portfolio3D">3D Portfolio Value Preview</div>

<!-- TRANSACTION HISTORY -->
<div id="transactionHistory"></div>

<!-- MODAL -->
<div class="modal" id="withdrawModal">
  <div class="modal-content">
    <h3>Withdraw USD</h3>
    <select id="withdrawMethod">
      <option value="">Select Method</option>
      <option value="momo">MTN MoMo</option>
      <option value="bank">Bank Transfer (Southern Africa)</option>
    </select>
    <input type="text" id="fullName" placeholder="Full Name">
    <select id="country">
      <option value="">Select Country</option>
      <option value="Ghana">Ghana</option>
      <option value="Uganda">Uganda</option>
      <option value="Nigeria">Nigeria</option>
      <option value="South Africa">South Africa</option>
      <option value="Botswana">Botswana</option>
      <option value="Namibia">Namibia</option>
      <option value="Malawi">Malawi</option>
    </select>
    <input type="text" id="momoNumber" placeholder="MTN MoMo Number (for momo)">
    <input type="text" id="bankDetails" placeholder="Bank Name / Account (for bank)">
    <button id="confirmWithdrawBtn">→</button>
  </div>
</div>

<script>
// ========================
// STUDENT DATA
// ========================
let studentData = JSON.parse(localStorage.getItem('studentData')) || {
  name:"Test Student", university:"Test Uni", program:"VA",
  walletZAC:100, walletUSD:50, verified:true, loggedIn:true, transactions:[]
};

// ZAC → USD conversion
const ZACtoUSD = 0.014;

// ========================
// UI UPDATE
// ========================
function updateWalletUI(){
  document.getElementById('studentName').innerText=studentData.name;
  document.getElementById('studentUni').innerText=studentData.university;
  document.getElementById('studentProgram').querySelector('strong').innerText=studentData.program;
  document.getElementById('verifiedStatus').innerText=studentData.verified?"Verified Freelancer":"Unverified";
  document.getElementById('zacBalance').innerText=studentData.walletZAC;
  studentData.walletUSD = (studentData.walletZAC * ZACtoUSD).toFixed(2);
  document.getElementById('usdBalance').innerText=studentData.walletUSD;
  document.getElementById('totalPortfolio').innerText=(parseFloat(studentData.walletUSD) + studentData.walletZAC*ZACtoUSD).toFixed(2);
  renderTransactions();
}

// ========================
// TRANSACTIONS
// ========================
function renderTransactions(){
  const historyDiv=document.getElementById('transactionHistory');
  historyDiv.innerHTML='';
  studentData.transactions.slice().reverse().forEach(tx=>{
    const card=document.createElement('div');
    card.className='transaction-card';
    card.innerHTML=`<span>${tx.date}</span><span>${tx.type} +${tx.amount}</span>`;
    historyDiv.appendChild(card);
  });
}

// ========================
// MODAL LOGIC
// ========================
const withdrawBtn=document.getElementById('withdrawBtn');
const modal=document.getElementById('withdrawModal');
const confirmBtn=document.getElementById('confirmWithdrawBtn');
const withdrawMethod=document.getElementById('withdrawMethod');

withdrawBtn.onclick=()=>modal.style.display='flex';
window.onclick=e=>{if(e.target===modal) modal.style.display='none';}

confirmBtn.onclick=()=>{
  const method = withdrawMethod.value;
  const name = document.getElementById('fullName').value.trim();
  const country = document.getElementById('country').value;
  const momo = document.getElementById('momoNumber').value.trim();
  const bank = document.getElementById('bankDetails').value.trim();
  if(!method || !name || !country){alert("Fill required fields"); return;}
  if(method==='momo' && !momo){alert("Enter MTN MoMo Number"); return;}
  if(method==='bank' && !bank){alert("Enter Bank Details"); return;}
  if(studentData.walletUSD<=0){alert("No USD available"); return;}
  
  confirmBtn.classList.add('confirming');
  
  // MOCK API CALL - replace with Flutterwave/MTN MoMo API
  setTimeout(()=>{
    studentData.transactions.push({
      date:new Date().toLocaleString(),
      type: method==='momo'?`MTN MoMo (${country})`:`Bank Transfer (${country})`,
      amount:studentData.walletUSD
    });
    studentData.walletUSD=0;
    studentData.walletZAC=0; // reset ZAC after conversion
    updateWalletUI();
    localStorage.setItem('studentData',JSON.stringify(studentData));
    confirmBtn.classList.remove('confirming');
    modal.style.display='none';
    document.getElementById('fullName').value='';
    document.getElementById('country').value='';
    document.getElementById('momoNumber').value='';
    document.getElementById('bankDetails').value='';
    withdrawMethod.value='';
    alert("Withdrawal request sent successfully!");
  },1500);
}

// ========================
// LIVE ZAC UPDATE FROM Learn & Earn
// ========================
window.addEventListener('storage',e=>{
  if(e.key==='studentData'){
    const updated=JSON.parse(e.newValue);
    studentData.walletZAC=updated.walletZAC;
    updateWalletUI();
  }
});

// INITIAL UI
updateWalletUI();

// 3D Portfolio Hover Effect
const portfolio3D=document.getElementById('portfolio3D');
portfolio3D.addEventListener('mousemove',(e)=>{
  const x=(e.clientX/window.innerWidth-0.5)*30;
  const y=(e.clientY/window.innerHeight-0.5)*15;
  portfolio3D.style.transform=`rotateY(${x}deg) rotateX(${y}deg)`;
});
portfolio3D.addEventListener('mouseleave',()=>portfolio3D.style.transform='rotateY(0deg) rotateX(0deg)');
</script>
</body>
</html>