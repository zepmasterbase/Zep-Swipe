<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Zep Swipe â€” Wallet</title>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@600;700&family=Poppins:wght@300;400;500,600&display=swap" rel="stylesheet">
<style>
:root{
  --zep-blue:#00f0ff;
  --zep-violet:#9c4dff;
  --bg:#050018;
  --glass:rgba(255,255,255,0.08);
  --green:#00ff94;
  --text-light:rgba(255,255,255,.85);
}

/* RESET */
*{box-sizing:border-box;margin:0;padding:0;font-family:Poppins,sans-serif;}
body{background:var(--bg);color:#fff;min-height:100vh;display:flex;flex-direction:column;}

/* HEADER */
header{
  display:flex;justify-content:space-between;align-items:center;
  padding:16px;
  background:radial-gradient(circle at center, rgba(0,240,255,.1), rgba(156,77,255,.1));
  backdrop-filter:blur(14px);
  box-shadow:0 0 20px var(--zep-blue),0 0 40px var(--zep-violet);
  animation:headerPulse 2s infinite;
}
@keyframes headerPulse{
  0%{box-shadow:0 0 15px var(--zep-blue),0 0 30px var(--zep-violet);}
  50%{box-shadow:0 0 25px var(--zep-blue),0 0 50px var(--zep-violet);}
  100%{box-shadow:0 0 15px var(--zep-blue),0 0 30px var(--zep-violet);}
}
.brand{display:flex;align-items:center;gap:12px;}
.brand img{width:50px;height:50px;}
.brand span{font-family:Orbitron;font-size:1.5rem;background:linear-gradient(90deg,var(--zep-blue),var(--zep-violet));-webkit-background-clip:text;-webkit-text-fill-color:transparent;}

/* CONTAINER */
.container{max-width:900px;margin:24px auto;padding:16px;display:flex;flex-direction:column;gap:20px;}

/* CARD */
.card{background:var(--glass);padding:20px;border-radius:18px;border:1px solid rgba(255,255,255,.12);box-shadow:0 0 20px rgba(0,240,255,.1),0 0 30px rgba(156,77,255,.1);}
.card h3{font-family:Orbitron;margin-bottom:12px;}

/* WALLET BALANCE */
.wallet-balance{display:flex;justify-content:space-between;align-items:center;font-size:1.2rem;margin-bottom:12px;}
.wallet-balance span{font-family:Orbitron;}

/* BUTTONS */
button{padding:12px 20px;border:none;border-radius:999px;font-family:Orbitron;background:linear-gradient(90deg,var(--zep-blue),var(--zep-violet));color:#050015;cursor:pointer;transition:.3s;margin-top:10px;}
button:hover{transform:translateY(-2px);box-shadow:0 0 15px var(--zep-blue),0 0 30px var(--zep-violet);}
button.secondary{background:rgba(255,255,255,0.1);color:#fff;}

/* CHART */
#chartContainer{background:rgba(255,255,255,.05);padding:12px;border-radius:12px;margin-top:12px;}
.bar{height:20px;background:linear-gradient(90deg,var(--zep-blue),var(--zep-violet));margin-bottom:6px;border-radius:6px;transition:width .4s ease;}

/* MODAL */
.modal-overlay{position:fixed;inset:0;background:rgba(0,0,0,.7);display:none;align-items:center;justify-content:center;z-index:1000;}
.modal{background:var(--glass);padding:20px;border-radius:18px;max-width:400px;width:90%;text-align:center;box-shadow:0 0 20px var(--zep-blue),0 0 40px var(--zep-violet);}
.modal button{margin-top:12px;}

/* RESPONSIVE */
@media(max-width:600px){.wallet-balance{flex-direction:column;align-items:flex-start;}}
</style>
</head>
<body>

<header>
  <div class="brand">
    <img src="https://payhip.com/cdn-cgi/image/format=auto/https://pe56d.s3.amazonaws.com/o_1jfnua21qtu1vi2pfom33p641h.png" alt="Logo">
    <span>Zep Swipe</span>
  </div>
</header>

<div class="container">

  <!-- WALLET BALANCE -->
  <div class="card">
    <h3>Wallet</h3>
    <div class="wallet-balance">
      <span>ZAC Balance: <strong id="zacBalance">0</strong> ZAC (~$0.00)</span>
      <span>USD Balance: <strong id="usdBalance">$0.00</strong></span>
    </div>
    <button id="dailyTaskBtn">Daily Task Complete +25 ZAC</button>
    <button id="withdrawBtn">Withdraw USD</button>
    <div id="chartContainer"></div>
  </div>

</div>

<!-- MODAL -->
<div class="modal-overlay" id="modalOverlay">
  <div class="modal" id="modalContent">
    <p id="modalText">Processing...</p>
    <button onclick="closeModal()">Close</button>
  </div>
</div>

<script>
// USERS
let users = JSON.parse(localStorage.getItem("users")) || {};
let currentUserId = localStorage.getItem("currentUserId");
if(!currentUserId || !users[currentUserId]) location.href="login.html";
let currentUser = users[currentUserId];

// Simulated ZAC & USD
const ZAC_VALUE = 0.0041;
currentUser.zacBalance = currentUser.zacBalance || 0;
currentUser.usdBalance = currentUser.usdBalance || 0;

// DOM
const zacBalance = document.getElementById("zacBalance");
const usdBalance = document.getElementById("usdBalance");
const dailyTaskBtn = document.getElementById("dailyTaskBtn");
const withdrawBtn = document.getElementById("withdrawBtn");
const chartContainer = document.getElementById("chartContainer");
const modalOverlay = document.getElementById("modalOverlay");
const modalText = document.getElementById("modalText");

// MODAL
function showModal(text){modalText.innerText=text;modalOverlay.style.display="flex";}
function closeModal(){modalOverlay.style.display="none";}

// RENDER BALANCES
function renderBalances(){
  zacBalance.innerText = currentUser.zacBalance;
  usdBalance.innerText = `$${currentUser.usdBalance.toFixed(2)}`;
  renderChart();
}
renderBalances();

// CHART
function renderChart(){
  chartContainer.innerHTML="";
  for(let i=0;i<currentUser.zacHistory?.length || 0;i++){
    const b=document.createElement("div");
    b.className="bar";
    b.style.width=(currentUser.zacHistory[i]*ZAC_VALUE*1000)+"px"; // visual scale
    b.title=`Day ${i+1}: ${currentUser.zacHistory[i]} ZAC`;
    chartContainer.appendChild(b);
  }
}

// DAILY TASK
dailyTaskBtn.addEventListener("click",()=>{
  currentUser.zacBalance +=25;
  if(!currentUser.zacHistory) currentUser.zacHistory=[];
  currentUser.zacHistory.push(25);
  users[currentUserId]=currentUser;
  localStorage.setItem("users",JSON.stringify(users));
  renderBalances();
});

// WITHDRAW USD
withdrawBtn.addEventListener("click",()=>{
  showModal("Choose withdrawal method...");
  modalContent.innerHTML=`
    <h3>Select Withdrawal Method</h3>
    <button id="momoBtn">MTN Momo</button>
    <button id="bankBtn">Bank Transfer</button>
    <button onclick="closeModal()">Cancel</button>
  `;
  document.getElementById("momoBtn").addEventListener("click",()=>{
    closeModal();
    showModal("Processing Momo Withdrawal...");
    setTimeout(()=>{
      if(currentUser.usdBalance>0){
        alert(`$${currentUser.usdBalance.toFixed(2)} withdrawn via MTN Momo!`);
        currentUser.usdBalance=0;
        users[currentUserId]=currentUser;
        localStorage.setItem("users",JSON.stringify(users));
        renderBalances();
      } else {alert("No USD balance to withdraw.");}
      closeModal();
    },1500);
  });
  document.getElementById("bankBtn").addEventListener("click",()=>{
    closeModal();
    showModal("Processing Bank Withdrawal...");
    setTimeout(()=>{
      if(currentUser.usdBalance>0){
        alert(`$${currentUser.usdBalance.toFixed(2)} withdrawn via Bank!`);
        currentUser.usdBalance=0;
        users[currentUserId]=currentUser;
        localStorage.setItem("users",JSON.stringify(users));
        renderBalances();
      } else {alert("No USD balance to withdraw.");}
      closeModal();
    },1500);
  });
});

// LISTEN FOR INVOICE RELEASED FUNDS
window.addEventListener("storage",()=>{
  users=JSON.parse(localStorage.getItem("users"));
  currentUser=users[currentUserId];
  renderBalances();
});

// SIMULATE MARKETPLACE PAYMENT
function addMarketplacePayment(amountUSD){
  currentUser.usdBalance += amountUSD;
  users[currentUserId]=currentUser;
  localStorage.setItem("users",JSON.stringify(users));
  renderBalances();
}
</script>

</body>
</html>