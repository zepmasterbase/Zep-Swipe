<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Zep Swipe ‚Äî Wallet</title>

<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@600;700&family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">

<style>
:root{
  --zep-blue:#00f0ff;
  --zep-violet:#9c4dff;
  --bg:radial-gradient(circle at 30% 10%, #050018, #00000c);
  --glass:rgba(255,255,255,0.08);
  --text-light:rgba(255,255,255,0.85);
  --success:#33ffb1;
  --danger:#ff5f7a;
}

*{box-sizing:border-box;margin:0;padding:0;font-family:Poppins,sans-serif}

body{
  background:var(--bg);
  color:#fff;
  min-height:100vh;
}

/* HEADER */
header{
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:18px 22px;
  margin:16px;
  border-radius:16px;
  background:radial-gradient(circle at center, rgba(0,240,255,.2), rgba(156,77,255,.2));
  backdrop-filter:blur(14px);
}
.brand{
  font-family:Orbitron;
  font-size:1.4rem;
  background:linear-gradient(90deg,var(--zep-blue),var(--zep-violet));
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
}
.home-btn{
  border:none;
  width:40px;
  height:40px;
  border-radius:50%;
  cursor:pointer;
  background:rgba(255,255,255,.12);
  color:#fff;
  font-size:18px;
}
.home-btn:hover{background:rgba(0,240,255,.3)}

/* MAIN */
.container{
  max-width:900px;
  margin:auto;
  padding:16px;
}

/* BALANCE CARD */
.balance-card{
  background:linear-gradient(135deg, rgba(0,240,255,.18), rgba(156,77,255,.18));
  border-radius:22px;
  padding:28px;
  box-shadow:0 0 40px rgba(156,77,255,.35);
  text-align:center;
  margin-bottom:24px;
}
.balance-card h2{
  font-family:Orbitron;
  letter-spacing:1px;
}
.zac{
  font-size:3rem;
  font-family:Orbitron;
  margin:10px 0;
}
.usd{
  opacity:.8;
  margin-bottom:20px;
}
.actions{
  display:flex;
  gap:12px;
  justify-content:center;
  flex-wrap:wrap;
}
.actions button{
  padding:12px 22px;
  border:none;
  border-radius:999px;
  cursor:pointer;
  font-weight:600;
  background:linear-gradient(90deg,var(--zep-blue),var(--zep-violet));
  color:#050015;
}
.actions button.secondary{
  background:rgba(255,255,255,.12);
  color:#fff;
}

/* GRID */
.grid{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:16px;
}
@media(max-width:768px){
  .grid{grid-template-columns:1fr}
}

/* CARDS */
.card{
  background:var(--glass);
  border-radius:18px;
  padding:20px;
  border:1px solid rgba(255,255,255,.12);
}
.card h3{
  font-family:Orbitron;
  margin-bottom:12px;
}

/* HISTORY */
.tx{
  display:flex;
  justify-content:space-between;
  padding:10px 0;
  border-bottom:1px solid rgba(255,255,255,.08);
}
.tx:last-child{border-bottom:none}
.positive{color:var(--success)}
.negative{color:var(--danger)}

/* MODAL */
.modal{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.7);
  display:none;
  align-items:center;
  justify-content:center;
  z-index:99;
}
.modal-box{
  background:#0a0620;
  border-radius:18px;
  padding:24px;
  width:90%;
  max-width:420px;
  box-shadow:0 0 40px rgba(156,77,255,.4);
}
.modal-box h3{
  font-family:Orbitron;
  margin-bottom:12px;
}
.modal-box input, .modal-box select{
  width:100%;
  padding:12px;
  margin-bottom:12px;
  border-radius:12px;
  border:none;
}
.modal-box button{
  width:100%;
  padding:12px;
  border:none;
  border-radius:999px;
  font-weight:600;
  cursor:pointer;
  background:linear-gradient(90deg,var(--zep-blue),var(--zep-violet));
}

/* FOOT NOTE */
.note{
  text-align:center;
  font-size:.85rem;
  opacity:.75;
  margin-top:20px;
}
</style>
</head>

<body>

<script>
/* SESSION CHECK */
const user = JSON.parse(localStorage.getItem("currentUser"));
if(!user){
  window.location.href="auth.html";
}
</script>

<header>
  <div class="brand">Zep Swipe</div>
  <button class="home-btn" onclick="location.href='student-dashboard.html'">üè†</button>
</header>

<div class="container">

  <!-- BALANCE -->
  <div class="balance-card">
    <h2>Total Portfolio</h2>
    <div class="zac" id="zacBal">0 ZAC</div>
    <div class="usd" id="usdBal">$0.00 USD</div>
    <div class="actions">
      <button onclick="openMoMo()">Withdraw to MTN MoMo</button>
      <button class="secondary" onclick="openBank()">Withdraw to Bank</button>
    </div>
  </div>

  <!-- GRID -->
  <div class="grid">

    <!-- EARNINGS -->
    <div class="card">
      <h3>Earnings Overview</h3>
      <p>Today: <strong id="todayEarn">+0 ZAC</strong></p>
      <p>This Week: <strong id="weekEarn">+0 ZAC</strong></p>
      <p>All Time: <strong id="allEarn">0 ZAC</strong></p>
    </div>

    <!-- HISTORY -->
    <div class="card">
      <h3>Recent Activity</h3>
      <div id="history"></div>
    </div>

  </div>

  <div class="note">
    ‚úî Secure wallet ‚Ä¢ ‚úî Flutterwave-ready ‚Ä¢ ‚úî Manual withdrawal review
  </div>

</div>

<!-- MTN MOMO MODAL -->
<div class="modal" id="momoModal">
  <div class="modal-box">
    <h3>Withdraw to MTN MoMo</h3>
    <input id="momoName" placeholder="Account Name" />
    <input id="momoNumber" placeholder="MTN MoMo Number" />
    <select id="momoCountry">
      <option value="">Select Country</option>
      <option>Ghana</option>
      <option>Uganda</option>
      <option>Cameroon</option>
      <option>Rwanda</option>
      <option>Zambia</option>
    </select>
    <input id="momoAmount" placeholder="Amount (ZAC)" type="number"/>
    <button onclick="submitMoMo()">Submit Withdrawal</button>
  </div>
</div>

<!-- BANK MODAL -->
<div class="modal" id="bankModal">
  <div class="modal-box">
    <h3>Withdraw to Bank</h3>
    <input placeholder="Account Name"/>
    <input placeholder="Account Number"/>
    <input placeholder="Bank Name"/>
    <input placeholder="Country"/>
    <input placeholder="Amount (ZAC)" type="number"/>
    <button>Submit Withdrawal</button>
  </div>
</div>

<script>
const ZAC_RATE = 0.014;

function loadWallet(){
  const zac = user.zacBalance || 0;
  document.getElementById("zacBal").innerText = zac + " ZAC";
  document.getElementById("usdBal").innerText = "$" + (zac * ZAC_RATE).toFixed(2);

  document.getElementById("allEarn").innerText = zac + " ZAC";

  const history = document.getElementById("history");
  history.innerHTML = "";

  (user.transactions || []).slice(-5).reverse().forEach(tx=>{
    const div = document.createElement("div");
    div.className="tx";
    div.innerHTML = `
      <span>${tx.note}</span>
      <span class="${tx.amount>0?'positive':'negative'}">${tx.amount>0?'+':''}${tx.amount} ZAC</span>
    `;
    history.appendChild(div);
  });
}

function openMoMo(){document.getElementById("momoModal").style.display="flex"}
function openBank(){document.getElementById("bankModal").style.display="flex"}

function submitMoMo(){
  const payload={
    name: momoName.value,
    number: momoNumber.value,
    country: momoCountry.value,
    amount: momoAmount.value,
    currency:"ZAC",
    usd_equivalent:(momoAmount.value * ZAC_RATE).toFixed(2),
    provider:"MTN_MOMO"
  };
  console.log("Flutterwave MoMo payload:",payload);
  alert("Withdrawal submitted for review.");
  document.getElementById("momoModal").style.display="none";
}

window.onclick=e=>{
  if(e.target.classList.contains("modal")) e.target.style.display="none";
}

loadWallet();
</script>

</body>
</html>